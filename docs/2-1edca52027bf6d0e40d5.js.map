{"version":3,"sources":["webpack:///./src/components/ErrorBoundary.tsx","webpack:///./src/components/Header/Signup.tsx","webpack:///./src/components/Header/Account.tsx","webpack:///./src/components/Header/index.tsx","webpack:///./src/components/Layout.tsx","webpack:///./src/utils/createRxDb.ts","webpack:///./src/utils/couchUrl.ts","webpack:///./src/utils/createAndSyncUserCollection.ts","webpack:///./src/state/Auth.ts","webpack:///./src/state/withAuth.js","webpack:///./src/components/Header/Login.tsx","webpack:///./src/utils/userDbNameFromUserName.ts"],"names":["Container","styled","div","withConfig","displayName","componentId","ErrorTitle","ReloadButton","Button","ErrorBoundary","props","_this","_Component","call","this","state","error","errorInfo","componentDidCatch","setState","render","_this2","console","log","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","componentStack","variant","onClick","window","location","reload","children","React","Children","map","child","cloneElement","Object","assign","Component","StyledDialog","Dialog","StyledDiv","StyledInput","Input","enhance","compose","withAuthState","withState","withHandlers","close","_ref","authState","setSignupOpen","onClickSignup","_ref2","email","password","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","signUp","t0","stop","onToggleShowPass","_ref4","showPass","setShowPass","onBlurEmail","_ref5","setEmail","event","target","value","onBlurPassword","_ref6","setPassword","_ref7","emailErrorText","passwordErrorText","setEmailErrorText","setPasswordErrorText","user","db","react_default","aria-labelledby","open","signupOpen","DialogTitle_default","id","FormControl_default","fullWidth","aria-describedby","InputLabel_default","htmlFor","defaultValue","onBlur","autoFocus","onKeyPress","e","key","FormHelperText_default","type","autoComplete","autoCorrect","spellCheck","endAdornment","InputAdornment_default","position","IconButton_default","onMouseDown","preventDefault","title","md","DialogActions_default","Button_default","color","IconContainer","UserNameDiv","onClickMenu","setAnchorEl","currentTarget","onCloseMenu","_ref3","onClickLogin","setLoginOpen","loginOpen","onClickLogout","logOut","anchorEl","_authState$state","name","Fragment","aria-haspopup","aria-label","fa","Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","onClose","MenuItem_default","Header_Signup","Login","SiteTitle","Typography","Spacer","NavButton","active","onClickSiteTitle","navigate","es","pathname","AppBar_default","Toolbar_default","noWrap","component","Link","to","toString","Header_Account","Layout","gatsby_browser_entry","query","data","Helmet_default","site","siteMetadata","meta","content","lang","components_Header","_4130953669","rxdb","plugin","pouchdbAdapterHttp","pouchdbAdapterIdb","createRxDb","syncs","dbs","create","adapter","erfassen","sent","collection","schema","messageSchema","zeitSchema","ortSchema","ort","sync","remote","options","live","retry","find","where","eq","beobSchema","beob","abrupt","couchUrl","isLocalhost","hostname","replace","createAndSyncUserCollection","userDbName","userDb","isAlreadyBeingSynced","userDbNameFromUserName","pouchSettings","fetch","url","opts","credentials","PouchDB","userDocSchema","message","includes","addDb","addSync","_x","apply","arguments","pouchdbAuthentication","AuthContainer","_Container","setAuthDb","authDb","setName","t1","logIn","t2","_callee2","logInResponce","_context2","Error","assertThisInitialized_default","_x2","_callee3","_this$state","_context3","values","forEach","remove","cancel","_Object$assign","newDbs","_Object$assign2","newSyncs","getSession","then","resp","get","catch","_ref8","__webpack_exports__","WrappedComponent","unstated_es","AuthState","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","_ErrorBoundary__WEBPACK_IMPORTED_MODULE_19__","_material_ui_core_DialogTitle__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8___default","_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_12___default","react_icons_md__WEBPACK_IMPORTED_MODULE_13__","_material_ui_core_DialogActions__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default","module","exports","toLowerCase"],"mappings":"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","file":"2-1edca52027bf6d0e40d5.js","sourcesContent":["// @flow\r\nimport React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst Container = styled.div`\r\n  margin: 10px;\r\n`\r\nconst ErrorTitle = styled.div`\r\n  margin-bottom: 10px;\r\n`\r\nconst ReloadButton = styled(Button)`\r\n  margin-top: 10px !important;\r\n`\r\n\r\ninterface Props {}\r\ninterface State {\r\n  error: Error\r\n  errorInfo: any\r\n}\r\n\r\nclass ErrorBoundary<Props, State> extends Component {\r\n  constructor(props: Props) {\r\n    super(props)\r\n    this.state = { error: null, errorInfo: null }\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: any) {\r\n    // Catch errors in any components below and re-render with error message\r\n    this.setState({\r\n      error: error,\r\n      errorInfo: errorInfo,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { errorInfo } = this.state\r\n    if (errorInfo) {\r\n      console.log('errorInfo:', errorInfo)\r\n      return (\r\n        <Container>\r\n          <ErrorTitle>\r\n            Oh je, es ist ein Fehler aufgetreten! Bericht:\r\n          </ErrorTitle>\r\n          <div>{errorInfo.componentStack}</div>\r\n          <ReloadButton\r\n            variant=\"outlined\"\r\n            onClick={() => {\r\n              typeof window !== 'undefined' && window.location.reload(false)\r\n            }}\r\n          >\r\n            Neu laden\r\n          </ReloadButton>\r\n        </Container>\r\n      )\r\n    }\r\n    const { children } = this.props\r\n    var childrenWithProps = React.Children.map(children, child =>\r\n      React.cloneElement(child, { ...this.props }),\r\n    )\r\n\r\n    // Normally, just render children\r\n    // and pass all props\r\n    return childrenWithProps\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary\r\n","// @flow\r\nimport React from 'react'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'\r\nimport Button from '@material-ui/core/Button'\r\nimport styled from 'styled-components'\r\nimport compose from 'recompose/compose'\r\nimport withHandlers from 'recompose/withHandlers'\r\nimport withState from 'recompose/withState'\r\n\r\nimport ErrorBoundary from '../ErrorBoundary'\r\nimport withAuthState from '../../state/withAuth'\r\nimport { Props as authStateProps } from '../../state/Auth'\r\n\r\nconst StyledDialog = styled(Dialog)``\r\nconst StyledDiv = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 24px;\r\n`\r\nconst StyledInput = styled(Input)`\r\n  &:before {\r\n    border-bottom-color: rgba(0, 0, 0, 0.1) !important;\r\n  }\r\n`\r\n\r\nconst enhance = compose(\r\n  withAuthState,\r\n  withState('email', 'setEmail', ''),\r\n  withState('password', 'setPassword', ''),\r\n  withState('showPass', 'setShowPass', false),\r\n  withState('emailErrorText', 'setEmailErrorText', ''),\r\n  withState('passwordErrorText', 'setPasswordErrorText', ''),\r\n  withHandlers<any, any>({\r\n    close: ({ authState }: { authState: authStateProps }) => () =>\r\n      authState.setSignupOpen(false),\r\n    onClickSignup: ({\r\n      email,\r\n      password,\r\n      authState,\r\n    }: {\r\n      email: string\r\n      password: string\r\n      authState: authStateProps\r\n    }) => async () => {\r\n      try {\r\n        await authState.signUp({ email, password })\r\n      } catch (error) {\r\n        console.log('Signup: error logging in:', error)\r\n      }\r\n    },\r\n    onToggleShowPass: ({\r\n      showPass,\r\n      setShowPass,\r\n    }: {\r\n      showPass: boolean\r\n      setShowPass: (showPass: boolean) => void\r\n    }) => () => {\r\n      setShowPass(!showPass)\r\n    },\r\n  }),\r\n  withHandlers<any, any>({\r\n    onBlurEmail: ({ setEmail }: { setEmail: (email: string) => void }) => (\r\n      event: Event,\r\n    ) => setEmail(event.target.value),\r\n    onBlurPassword: ({\r\n      setPassword,\r\n    }: {\r\n      setPassword: (password: string) => void\r\n    }) => (event: Event) => setPassword(event.target.value),\r\n  }),\r\n)\r\n\r\nconst Signup = ({\r\n  email,\r\n  password,\r\n  showPass,\r\n  setShowPass,\r\n  emailErrorText,\r\n  passwordErrorText,\r\n  setEmailErrorText,\r\n  setPasswordErrorText,\r\n  onBlurEmail,\r\n  onBlurPassword,\r\n  onClickSignup,\r\n  user,\r\n  close,\r\n  onToggleShowPass,\r\n  db,\r\n  authState,\r\n}: {\r\n  email: string\r\n  showPass: boolean\r\n  setEmail: () => void\r\n  password: string\r\n  setShowPass: (showPass: boolean) => void\r\n  setPassword: () => void\r\n  emailErrorText: string\r\n  setEmailErrorText: () => void\r\n  passwordErrorText: string\r\n  setPasswordErrorText: () => void\r\n  onBlurEmail: () => void\r\n  onBlurPassword: () => void\r\n  onClickSignup: () => void\r\n  user: Object\r\n  close: () => void\r\n  onToggleShowPass: () => void\r\n  db: any\r\n  authState: authStateProps\r\n}) => (\r\n  <ErrorBoundary>\r\n    <StyledDialog\r\n      aria-labelledby=\"dialog-title\"\r\n      open={authState.state.signupOpen}\r\n    >\r\n      <DialogTitle id=\"dialog-title\">Neues Konto</DialogTitle>\r\n      <StyledDiv>\r\n        <FormControl\r\n          error={!!emailErrorText}\r\n          fullWidth\r\n          aria-describedby=\"emailHelper\"\r\n        >\r\n          <InputLabel htmlFor=\"email\">Email</InputLabel>\r\n          <StyledInput\r\n            id=\"email\"\r\n            defaultValue={email}\r\n            onBlur={onBlurEmail}\r\n            autoFocus\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter') {\r\n                onBlurEmail()\r\n              }\r\n            }}\r\n          />\r\n          <FormHelperText id=\"emailHelper\">{emailErrorText}</FormHelperText>\r\n        </FormControl>\r\n        <FormControl\r\n          error={!!passwordErrorText}\r\n          fullWidth\r\n          aria-describedby=\"passwortHelper\"\r\n        >\r\n          <InputLabel htmlFor=\"passwort\">Passwort</InputLabel>\r\n          <StyledInput\r\n            id=\"passwort\"\r\n            type={showPass ? 'text' : 'password'}\r\n            defaultValue={password}\r\n            onBlur={onBlurPassword}\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter') {\r\n                onBlurPassword()\r\n              }\r\n            }}\r\n            autoComplete=\"current-password\"\r\n            autoCorrect=\"off\"\r\n            spellCheck=\"false\"\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  onClick={onToggleShowPass}\r\n                  onMouseDown={e => e.preventDefault()}\r\n                  title={showPass ? 'verstecken' : 'anzeigen'}\r\n                >\r\n                  {showPass ? <MdVisibilityOff /> : <MdVisibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n          <FormHelperText id=\"passwortHelper\">\r\n            {passwordErrorText}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </StyledDiv>\r\n      <DialogActions>\r\n        <Button onClick={close}>abbrechen</Button>\r\n        <Button color=\"primary\" onClick={onClickSignup}>\r\n          Konto erstellen\r\n        </Button>\r\n      </DialogActions>\r\n    </StyledDialog>\r\n  </ErrorBoundary>\r\n)\r\n\r\nexport default enhance(Signup)\r\n","import React from 'react'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport { FaUserCircle as UserIcon } from 'react-icons/fa'\r\nimport compose from 'recompose/compose'\r\nimport withHandlers from 'recompose/withHandlers'\r\nimport withState from 'recompose/withState'\r\nimport styled from 'styled-components'\r\n\r\nimport Signup from './Signup'\r\nimport Login from './Login'\r\nimport ErrorBoundary from '../ErrorBoundary'\r\nimport withAuthState from '../../state/withAuth'\r\nimport { Props as authStateProps } from '../../state/Auth'\r\n\r\nconst IconContainer = styled.div`\r\n  position: relative;\r\n  padding-left: 10px;\r\n`\r\nconst UserNameDiv = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  font-size: 10px;\r\n  width: 60px;\r\n  left: 5px;\r\n  text-align: center;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  /* ensure cursor is not changed */\r\n  z-index: -1;\r\n`\r\n\r\ninterface Props {\r\n  anchorEl: EventTarget | null\r\n  setAnchorEl: (anchorEl: EventTarget | null) => void\r\n  onClickMenu: (event: Event) => void\r\n  onCloseMenu: (event: Event) => void\r\n  onClickSignup: (signupOpen: boolean) => void\r\n  onClickLognin: (signupOpen: boolean) => void\r\n  authState: authStateProps\r\n}\r\n\r\nconst enhance = compose(\r\n  withAuthState,\r\n  withState('anchorEl', 'setAnchorEl', null),\r\n  withHandlers<any, any>({\r\n    onClickMenu: ({\r\n      setAnchorEl,\r\n    }: {\r\n      setAnchorEl: (anchorEl: EventTarget | null) => void\r\n    }) => (event: Event) => setAnchorEl(event.currentTarget),\r\n    onCloseMenu: ({\r\n      setAnchorEl,\r\n    }: {\r\n      setAnchorEl: (anchorEl: EventTarget | null) => void\r\n    }) => () => setAnchorEl(null),\r\n    onClickSignup: ({\r\n      setAnchorEl,\r\n      authState,\r\n    }: {\r\n      setAnchorEl: (anchorEl: EventTarget | null) => void\r\n      authState: authStateProps\r\n    }) => () => {\r\n      setAnchorEl(null)\r\n      authState.setSignupOpen(!authState.state.signupOpen)\r\n    },\r\n    onClickLogin: ({\r\n      setAnchorEl,\r\n      authState,\r\n    }: {\r\n      setAnchorEl: (anchorEl: EventTarget | null) => void\r\n      authState: authStateProps\r\n    }) => () => {\r\n      setAnchorEl(null)\r\n      authState.setLoginOpen(!authState.state.loginOpen)\r\n    },\r\n    onClickLogout: ({\r\n      setAnchorEl,\r\n      authState,\r\n    }: {\r\n      setAnchorEl: (anchorEl: EventTarget | null) => void\r\n      authState: authStateProps\r\n    }) => () => {\r\n      setAnchorEl(null)\r\n      authState.logOut()\r\n    },\r\n  }),\r\n)\r\n\r\nconst Account: React.SFC<Props> = ({\r\n  anchorEl,\r\n  onCloseMenu,\r\n  onClickMenu,\r\n  onClickSignup,\r\n  onClickLogout,\r\n  onClickLogin,\r\n  authState,\r\n}) => {\r\n  const { name, signupOpen, loginOpen } = authState.state\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <>\r\n        <IconContainer>\r\n          <IconButton\r\n            aria-haspopup=\"true\"\r\n            aria-label=\"Konto\"\r\n            onClick={onClickMenu}\r\n            color=\"inherit\"\r\n            title=\"Konto\"\r\n          >\r\n            <UserIcon />\r\n          </IconButton>\r\n          <UserNameDiv>{name || ''}</UserNameDiv>\r\n        </IconContainer>\r\n        <Menu\r\n          id=\"menu-appbar\"\r\n          anchorEl={anchorEl}\r\n          anchorOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'right',\r\n          }}\r\n          transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'right',\r\n          }}\r\n          open={!!anchorEl}\r\n          onClose={onCloseMenu}\r\n        >\r\n          {!name && <MenuItem onClick={onClickLogin}>Anmelden</MenuItem>}\r\n          {name && <MenuItem onClick={onClickLogout}>Abmelden</MenuItem>}\r\n          <MenuItem onClick={onClickSignup}>Konto erstellen</MenuItem>\r\n        </Menu>\r\n        {signupOpen && <Signup />}\r\n        {loginOpen && <Login />}\r\n      </>\r\n    </ErrorBoundary>\r\n  )\r\n}\r\n\r\nexport default enhance(Account)\r\n","import React from 'react'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport styled from 'styled-components'\r\nimport { Link, navigate } from 'gatsby'\r\nimport { Location } from '@reach/router'\r\nimport compose from 'recompose/compose'\r\nimport withHandlers from 'recompose/withHandlers'\r\n\r\nimport Account from './Account'\r\nimport ErrorBoundary from '../ErrorBoundary'\r\n\r\nconst SiteTitle = styled(Typography)`\r\n  display: none;\r\n  cursor: pointer;\r\n  @media (min-width: 700px) {\r\n    display: block;\r\n  }\r\n`\r\nconst Spacer = styled.div`\r\n  flex-grow: 1;\r\n`\r\ninterface NavButtonProps {\r\n  active: boolean\r\n}\r\nconst NavButton = styled<NavButtonProps, any>(Button)`\r\n  color: white !important;\r\n  border: ${props => (props.active ? '1px white' : 'unset')};\r\n  border-color: rgba(255, 255, 255, 0.5) !important;\r\n  font-weight: ${props => (props.active ? '700' : '600')};\r\n`\r\n\r\nconst enhance = compose(\r\n  withHandlers({ onClickSiteTitle: () => () => navigate('/') }),\r\n)\r\n\r\ninterface Props {\r\n  onClickSiteTitle: () => void\r\n}\r\n\r\nconst Header: React.SFC<Props> = ({ onClickSiteTitle }) => (\r\n  <Location>\r\n    {({ location }) => {\r\n      const { pathname } = location\r\n\r\n      return (\r\n        <ErrorBoundary>\r\n          <AppBar position=\"fixed\">\r\n            <Toolbar>\r\n              <SiteTitle\r\n                variant=\"h6\"\r\n                color=\"inherit\"\r\n                noWrap\r\n                title=\"Home\"\r\n                onClick={onClickSiteTitle}\r\n              >\r\n                erfassen.ch\r\n              </SiteTitle>\r\n              <Spacer />\r\n              <NavButton\r\n                variant={pathname === '/' ? 'outlined' : 'text'}\r\n                component={Link}\r\n                to=\"/\"\r\n                active={(pathname === '/').toString()}\r\n              >\r\n                Home\r\n              </NavButton>\r\n              <NavButton\r\n                variant={pathname === '/Projekte/' ? 'outlined' : 'text'}\r\n                component={Link}\r\n                to=\"/Projekte/\"\r\n                active={(pathname === '/Projekte/').toString()}\r\n              >\r\n                Projekte\r\n              </NavButton>\r\n              <Account />\r\n            </Toolbar>\r\n          </AppBar>\r\n        </ErrorBoundary>\r\n      )\r\n    }}\r\n  </Location>\r\n)\r\n\r\nexport default enhance(Header)\r\n","/**\r\n * Cant move Helmet to App\r\n * because neither StaticQuery nor AppQuery\r\n * work there :-(\r\n */\r\nimport React from 'react'\r\nimport Helmet from 'react-helmet'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nimport Header from './Header'\r\n\r\nconst query = graphql`\r\n  query SiteTitleQuery {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst Layout: React.SFC<{}> = ({ children }) => (\r\n  <StaticQuery\r\n    query={query}\r\n    render={data => (\r\n      <>\r\n        <Helmet\r\n          title={data.site.siteMetadata.title}\r\n          meta={[\r\n            { name: 'description', content: 'Sample' },\r\n            { name: 'keywords', content: 'sample, something' },\r\n          ]}\r\n        >\r\n          <html lang=\"en\" />\r\n        </Helmet>\r\n        <Header />\r\n        {children}\r\n      </>\r\n    )}\r\n  />\r\n)\r\n\r\nexport default Layout\r\n","import rxdb from 'rxdb'\r\n\r\nimport pouchdbAdapterHttp from 'pouchdb-adapter-http'\r\nimport pouchdbAdapterIdb from 'pouchdb-adapter-idb'\r\n\r\nimport zeitSchema from '../schemas/zeit.json'\r\nimport ortSchema from '../schemas/ort.json'\r\nimport beobSchema from '../schemas/beob.json'\r\nimport messageSchema from '../schemas/message.json'\r\n\r\nrxdb.plugin(pouchdbAdapterHttp)\r\nrxdb.plugin(pouchdbAdapterIdb)\r\n\r\nexport default async () => {\r\n  // TODO:\r\n  // 1. fetch userDoc and it's project list\r\n  // 2. for every project create an rxdb\r\n  // 3. for every project fetch typeDefs doc and extract table list\r\n  // 4. for every table create collection and sync it\r\n  let syncs: any = {}\r\n  let dbs = {}\r\n  try {\r\n    dbs.erfassen = await rxdb.create({\r\n      name: 'erfassen',\r\n      adapter: 'idb',\r\n    })\r\n  } catch (error) {\r\n    throw error\r\n  }\r\n  // maybe use\r\n  // https://github.com/rafamel/rxdb-utils#models\r\n  // to make this easier\r\n  await dbs.erfassen.collection({\r\n    name: 'message',\r\n    schema: messageSchema,\r\n  })\r\n  await dbs.erfassen.collection({\r\n    name: 'zeit',\r\n    schema: zeitSchema,\r\n  })\r\n  await dbs.erfassen.collection({\r\n    name: 'ort',\r\n    schema: ortSchema,\r\n  })\r\n  /**\r\n   * create global sync object\r\n   * and pass it sync responces\r\n   * reason: be able to check if replication exists already\r\n   * before starting new one\r\n   */\r\n  syncs.ort = await dbs.erfassen.ort.sync({\r\n    remote: 'http://localhost:5984/erfassen/',\r\n    options: {\r\n      live: true,\r\n      retry: true,\r\n    },\r\n    query: dbs.erfassen.ort\r\n      .find()\r\n      .where('type')\r\n      .eq('ort'),\r\n  })\r\n  await dbs.erfassen.collection({\r\n    name: 'beob',\r\n    schema: beobSchema,\r\n  })\r\n  syncs.beob = dbs.erfassen.beob.sync({\r\n    remote: 'http://localhost:5984/erfassen/',\r\n    options: {\r\n      live: true,\r\n      retry: true,\r\n    },\r\n    query: dbs.erfassen.beob\r\n      .find()\r\n      .where('type')\r\n      .eq('beob'),\r\n  })\r\n\r\n  return { dbs, syncs }\r\n}\r\n","// in development should return local path\r\nexport default () => {\r\n  if (typeof window === 'undefined') {\r\n    return 'https://erfassen.ch:5984/erfassen'\r\n  }\r\n  const hostnameWithoutWww: string = window.location.hostname.replace(\r\n    'www.',\r\n    '',\r\n  )\r\n  const isLocalhost: boolean = hostnameWithoutWww === 'localhost'\r\n  const hostname = isLocalhost ? 'localhost' : window.location.hostname\r\n  const couchUrl: string = isLocalhost\r\n    ? `http://${hostname}:5984/erfassen`\r\n    : `https://erfassen.ch:5984/erfassen`\r\n\r\n  return couchUrl\r\n}\r\n","import rxdb from 'rxdb'\r\nimport pouchdbAdapterIdb from 'pouchdb-adapter-idb'\r\n\r\nrxdb.plugin(pouchdbAdapterIdb)\r\n\r\nimport { Props as authStateProps } from '../state/Auth'\r\nimport userDbNameFromUserName from './userDbNameFromUserName'\r\nimport userDocSchema from '../schemas/userDoc.json'\r\n\r\nexport default async ({\r\n  authState,\r\n  email,\r\n}: {\r\n  authState: authStateProps\r\n  email: string\r\n}) => {\r\n  console.log('createAndSyncUserCollections', { authState })\r\n  const { dbs, syncs } = authState.state\r\n  // create userDoc Collection\r\n  // then sync it\r\n  const userDbName = userDbNameFromUserName(email)\r\n  console.log('createAndSyncUserCollections', { dbs, syncs })\r\n  let userDb\r\n  try {\r\n    userDb = await rxdb.create({\r\n      name: userDbName,\r\n      adapter: 'idb',\r\n      // force pouch to always include credentials\r\n      // see: https://github.com/pouchdb-community/pouchdb-authentication/issues/239#issuecomment-410489376\r\n      pouchSettings: {\r\n        fetch(url: any, opts: any) {\r\n          opts.credentials = 'include'\r\n          return (PouchDB as any).fetch(url, opts)\r\n        },\r\n      } as PouchDB.Configuration.RemoteDatabaseConfiguration,\r\n    })\r\n    await userDb.collection({\r\n      name: 'user',\r\n      schema: userDocSchema,\r\n      // force pouch to always include credentials\r\n      // see: https://github.com/pouchdb-community/pouchdb-authentication/issues/239#issuecomment-410489376\r\n      pouchSettings: {\r\n        fetch(url: any, opts: any) {\r\n          opts.credentials = 'include'\r\n          return (PouchDB as any).fetch(url, opts)\r\n        },\r\n      } as PouchDB.Configuration.RemoteDatabaseConfiguration,\r\n    })\r\n  } catch (error) {\r\n    if (error.message.includes('already exists')) {\r\n      console.log('user db already exists')\r\n      return\r\n    } else {\r\n      throw error\r\n    }\r\n  }\r\n  authState.addDb({ name: userDbName, db: userDb })\r\n  const isAlreadyBeingSynced: boolean = !!syncs && !!syncs[userDbName]\r\n  console.log('createAndSyncUserCollections', { dbs })\r\n  let sync\r\n  if (!isAlreadyBeingSynced) {\r\n    sync = userDb.user.sync({\r\n      remote: `http://localhost:5984/${userDbName}/`,\r\n      options: {\r\n        live: true,\r\n        retry: true,\r\n      },\r\n      query: userDb.user\r\n        .find()\r\n        .where('type')\r\n        .eq('user'),\r\n    })\r\n  }\r\n  authState.addSync({ name: userDbName, sync })\r\n  console.log('Signup', { dbs, userDbName })\r\n}\r\n","import { Container } from 'unstated'\r\n/**\r\n * somehow gatsby manages to sometimes (not always)\r\n * drag this file through node which makes\r\n * pouchdb-browser complain fetch is missing\r\n * using pouchdb is no solution because that complains\r\n * to miss many bindings\r\n */\r\nimport 'isomorphic-fetch'\r\nimport PouchDB from 'pouchdb-browser'\r\nimport pouchdbAuthentication from 'pouchdb-authentication'\r\nimport get from 'lodash/get'\r\n\r\nimport createRxDb from '../utils/createRxDb'\r\nimport couchUrl from '../utils/couchUrl'\r\nimport createAndSyncUserCollection from '../utils/createAndSyncUserCollection'\r\n\r\nPouchDB.plugin(pouchdbAuthentication)\r\n\r\ninterface LogInProps {\r\n  email: string\r\n  password: string\r\n}\r\n\r\ninterface StateProps {\r\n  authDb: any\r\n  name: string | null\r\n  signupOpen: boolean\r\n  loginOpen: boolean\r\n  dbs: any\r\n  syncs: Object\r\n}\r\nexport interface Props {\r\n  state: StateProps\r\n  setAuthDb: (authDb: any) => void\r\n  setName: (name: string | null) => void\r\n  setSignupOpen: (signupOpen: boolean) => void\r\n  setLoginOpen: (loginOpen: boolean) => void\r\n  signUp: () => void\r\n  logIn: () => void\r\n  logOut: () => void\r\n  addDb: () => void\r\n  addSync: () => void\r\n}\r\ndeclare global {\r\n  interface Window {\r\n    dbs: any\r\n  }\r\n}\r\n\r\nexport default class AuthContainer extends Container<StateProps> {\r\n  constructor(props: StateProps) {\r\n    super()\r\n    const authDb = new PouchDB(couchUrl())\r\n    const dbs = typeof window === 'undefined' ? null : window.dbs || null\r\n    this.state = {\r\n      authDb,\r\n      name: null,\r\n      signupOpen: false,\r\n      loginOpen: false,\r\n      dbs,\r\n      syncs: {},\r\n    }\r\n\r\n    authDb\r\n      .getSession()\r\n      .then((resp: any) => {\r\n        const name = get(resp, 'userCtx.name', null)\r\n        if (name) {\r\n          this.setState(state => ({ name }))\r\n          // TODO: createAndSyncUserCollection\r\n        }\r\n      })\r\n      .catch((error: Error) => {\r\n        throw error\r\n      })\r\n\r\n    // create initial dbs state\r\n    if (\r\n      (typeof window !== 'undefined' && !window.dbs) ||\r\n      typeof window === 'undefined'\r\n    ) {\r\n      // as hard as I tried, could not get typescript to type .then correctly\r\n      createRxDb()\r\n        .then(({ dbs, syncs }) => {\r\n          this.setState(state => ({ dbs, syncs }))\r\n          if (typeof window !== 'undefined') window.dbs = dbs\r\n        })\r\n        .catch(error => {\r\n          throw error\r\n        })\r\n    }\r\n  }\r\n\r\n  setAuthDb = (authDb: any) => {\r\n    this.setState(state => ({ authDb }))\r\n  }\r\n\r\n  setName = (name: string | null) => {\r\n    this.setState(state => ({ name }))\r\n  }\r\n\r\n  setSignupOpen = (signupOpen: boolean) => {\r\n    this.setState(state => ({ signupOpen }))\r\n  }\r\n\r\n  setLoginOpen = (loginOpen: boolean) => {\r\n    this.setState(state => ({ loginOpen }))\r\n  }\r\n\r\n  signUp = async ({ email, password }: LogInProps) => {\r\n    // first logout\r\n    try {\r\n      await this.logOut()\r\n    } catch (error) {\r\n      console.log('Auth, signUp: Error logging out:', error)\r\n    }\r\n\r\n    try {\r\n      await this.state.authDb.signUp(email, password)\r\n    } catch (error) {\r\n      console.log('Signup: error logging in:', error)\r\n    }\r\n    this.setSignupOpen(false)\r\n    // log in\r\n    try {\r\n      await this.logIn({ email, password })\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  }\r\n\r\n  logIn = async ({ email, password }: LogInProps) => {\r\n    // first logout\r\n    try {\r\n      await this.logOut()\r\n    } catch (error) {\r\n      console.log('Auth, logIn: Error logging out:', error)\r\n    }\r\n\r\n    let logInResponce: any\r\n    try {\r\n      logInResponce = await this.state.authDb.logIn(email, password)\r\n    } catch (error) {\r\n      if (error.name === 'unauthorized' || error.name === 'forbidden') {\r\n        // name or password incorrect\r\n        throw new Error('Name oder Passwort stimmt nicht')\r\n      } else {\r\n        // cosmic rays, a meteor, etc.\r\n        throw error\r\n      }\r\n    }\r\n    console.log('Auth, logIn: logInResponce logging in:', logInResponce)\r\n    this.setState(state => ({\r\n      name: logInResponce.name,\r\n      loginOpen: false,\r\n      authDb: new PouchDB(couchUrl()),\r\n    }))\r\n    // TODO: need to reset dbs and syncs first, to remove all traces of previous users?\r\n    createAndSyncUserCollection({ email, authState: this })\r\n  }\r\n\r\n  logOut = async () => {\r\n    try {\r\n      await this.state.authDb.logOut()\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n    const { dbs, syncs } = this.state\r\n    // remove all dbs\r\n    Object.values(dbs).forEach((db: any) => db.remove())\r\n    // stop all syncing\r\n    Object.values(syncs).forEach((sync: any) => sync.cancel())\r\n    this.setState(state => ({\r\n      name: null,\r\n      loginOpen: false,\r\n      dbs: null,\r\n      syncs: {},\r\n    }))\r\n    return\r\n  }\r\n\r\n  addDb = ({ name, db }: { name: string; db: any }) => {\r\n    console.log('Auth, addDb', { name, db, dbs: this.state.dbs })\r\n    this.setState(state => {\r\n      const newDbs = {\r\n        ...state.dbs,\r\n        [name]: db,\r\n      }\r\n      console.log('Auth, addDb', { newDbs })\r\n      window.dbs = newDbs\r\n      return {\r\n        dbs: newDbs,\r\n        //syncs: state.syncs,\r\n      }\r\n    })\r\n  }\r\n\r\n  addSync = ({ name, sync }: { name: string; sync: any }) => {\r\n    this.setState(state => {\r\n      const newSyncs = {\r\n        ...state.syncs,\r\n        [name]: sync,\r\n      }\r\n      return {\r\n        dbs: state.dbs,\r\n        syncs: newSyncs,\r\n      }\r\n    })\r\n  }\r\n}\r\n","/**\r\n * inspired from:\r\n * https://www.reddit.com/r/reactjs/comments/8t3di7/how_do_you_access_your_store_in_lifecycle/\r\n * example: https://github.com/jaredpalmer/react-fns/blob/052ea56092c53946c7937e1d32adf78a7d37d6f3/src/GeoPosition/withGeoPosition.tsx\r\n */\r\nimport React from 'react'\r\nimport { Subscribe } from 'unstated'\r\n\r\nimport AuthState from './Auth'\r\n\r\nexport default WrappedComponent => props => (\r\n  <Subscribe to={[AuthState]}>\r\n    {value => <WrappedComponent authState={value} {...props} />}\r\n  </Subscribe>\r\n)\r\n","// @flow\r\nimport React from 'react'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Input from '@material-ui/core/Input'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'\r\nimport Button from '@material-ui/core/Button'\r\nimport styled from 'styled-components'\r\nimport compose from 'recompose/compose'\r\nimport withHandlers from 'recompose/withHandlers'\r\nimport withState from 'recompose/withState'\r\n\r\nimport ErrorBoundary from '../ErrorBoundary'\r\nimport withAuthState from '../../state/withAuth'\r\nimport { Props as authStateProps } from '../../state/Auth'\r\n\r\nconst StyledDialog = styled(Dialog)``\r\nconst StyledDiv = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 24px;\r\n`\r\nconst StyledInput = styled(Input)`\r\n  &:before {\r\n    border-bottom-color: rgba(0, 0, 0, 0.1) !important;\r\n  }\r\n`\r\n\r\nconst enhance = compose(\r\n  withAuthState,\r\n  withState('email', 'setEmail', ''),\r\n  withState('password', 'setPassword', ''),\r\n  withState('showPass', 'setShowPass', false),\r\n  withState('emailErrorText', 'setEmailErrorText', ''),\r\n  withState('passwordErrorText', 'setPasswordErrorText', ''),\r\n  withHandlers<any, any>({\r\n    close: ({ authState }: { authState: authStateProps }) => () =>\r\n      authState.setLoginOpen(false),\r\n    onClickLogin: ({\r\n      email,\r\n      password,\r\n      authState,\r\n      setEmailErrorText,\r\n      setPasswordErrorText,\r\n    }: {\r\n      email: string\r\n      password: string\r\n      authState: authStateProps\r\n      setEmailErrorText: () => void\r\n      setPasswordErrorText: () => void\r\n    }) => async () => {\r\n      try {\r\n        await authState.logIn({ email, password })\r\n      } catch (error) {\r\n        setEmailErrorText(error.message)\r\n        setPasswordErrorText(error.message)\r\n      }\r\n    },\r\n    onToggleShowPass: ({\r\n      showPass,\r\n      setShowPass,\r\n    }: {\r\n      showPass: boolean\r\n      setShowPass: (showPass: boolean) => void\r\n    }) => () => {\r\n      setShowPass(!showPass)\r\n    },\r\n  }),\r\n  withHandlers<any, any>({\r\n    onBlurEmail: ({ setEmail }: { setEmail: (email: string) => void }) => (\r\n      event: Event,\r\n    ) => setEmail(event.target.value),\r\n    onBlurPassword: ({\r\n      setPassword,\r\n    }: {\r\n      setPassword: (password: string) => void\r\n    }) => (event: Event) => setPassword(event.target.value),\r\n  }),\r\n)\r\n\r\nconst Login = ({\r\n  email,\r\n  password,\r\n  showPass,\r\n  setShowPass,\r\n  emailErrorText,\r\n  passwordErrorText,\r\n  setEmailErrorText,\r\n  setPasswordErrorText,\r\n  onBlurEmail,\r\n  onBlurPassword,\r\n  onClickLogin,\r\n  close,\r\n  onToggleShowPass,\r\n  authState,\r\n}: {\r\n  email: string\r\n  showPass: boolean\r\n  setEmail: () => void\r\n  password: string\r\n  setShowPass: (showPass: boolean) => void\r\n  setPassword: () => void\r\n  emailErrorText: string\r\n  setEmailErrorText: () => void\r\n  passwordErrorText: string\r\n  setPasswordErrorText: () => void\r\n  onBlurEmail: () => void\r\n  onBlurPassword: () => void\r\n  onClickLogin: () => void\r\n  close: () => void\r\n  onToggleShowPass: () => void\r\n  authState: authStateProps\r\n}) => (\r\n  <ErrorBoundary>\r\n    <StyledDialog\r\n      aria-labelledby=\"login-dialog-title\"\r\n      open={authState.state.loginOpen}\r\n    >\r\n      <DialogTitle id=\"login-dialog-title\">Anmeldung</DialogTitle>\r\n      <StyledDiv>\r\n        <FormControl\r\n          error={!!emailErrorText}\r\n          fullWidth\r\n          aria-describedby=\"loginEmailHelper\"\r\n        >\r\n          <InputLabel htmlFor=\"loginEmail\">Email</InputLabel>\r\n          <StyledInput\r\n            id=\"loginEmail\"\r\n            defaultValue={email}\r\n            onBlur={onBlurEmail}\r\n            autoFocus\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter') {\r\n                onBlurEmail(e)\r\n              }\r\n            }}\r\n          />\r\n          <FormHelperText id=\"loginEmailHelper\">\r\n            {emailErrorText}\r\n          </FormHelperText>\r\n        </FormControl>\r\n        <FormControl\r\n          error={!!passwordErrorText}\r\n          fullWidth\r\n          aria-describedby=\"loginPasswortHelper\"\r\n        >\r\n          <InputLabel htmlFor=\"loginPasswort\">Passwort</InputLabel>\r\n          <StyledInput\r\n            id=\"loginPasswort\"\r\n            type={showPass ? 'text' : 'password'}\r\n            defaultValue={password}\r\n            onBlur={onBlurPassword}\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter') {\r\n                onBlurPassword(e)\r\n              }\r\n            }}\r\n            autoComplete=\"current-password\"\r\n            autoCorrect=\"off\"\r\n            spellCheck=\"false\"\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  onClick={onToggleShowPass}\r\n                  onMouseDown={e => e.preventDefault()}\r\n                  title={showPass ? 'verstecken' : 'anzeigen'}\r\n                >\r\n                  {showPass ? <MdVisibilityOff /> : <MdVisibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n          <FormHelperText id=\"loginPasswortHelper\">\r\n            {passwordErrorText}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </StyledDiv>\r\n      <DialogActions>\r\n        <Button onClick={close}>abbrechen</Button>\r\n        <Button color=\"primary\" onClick={onClickLogin}>\r\n          Anmelden\r\n        </Button>\r\n      </DialogActions>\r\n    </StyledDialog>\r\n  </ErrorBoundary>\r\n)\r\n\r\nexport default enhance(Login)\r\n","module.exports = (name: string): string =>\r\n  'user_' +\r\n  name\r\n    .toLowerCase()\r\n    .replace('@', '_at_')\r\n    .replace('.', '_p_')\r\n"],"sourceRoot":""}