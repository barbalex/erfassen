{"data":{"markdownRemark":{"html":"<p>This document describes how creating, editing and deleting users and projects is managed.<br/>\nIt's rather cryptic and probably most useful for myself.<br/><br/></p>\n<p>Inspired by <a href=\"https://github.com/pouchdb-community/pouchdb-authentication/blob/master/docs/recipes.md#some-people-can-read-some-docs-some-people-can-write-those-same-docs\" target=\"_self\" rel=\"nofollow\">PouchDB's docs</a>.</p>\n<h2 id=\"1-user\"><a href=\"#1-user\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. user</h2>\n<h3 id=\"create\"><a href=\"#create\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>create</h3>\n<ol>\n<li>\n<p>app-side</p>\n<ul>\n<li>user clicks menu to create account <img class=\"emoji-icon\" data-icon=\"emoji-heavy_check_mark\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwEVPG3D+wAAAutJREFUSMetlE1slFUUhp9755uZznwdilKo0qZRS2DBpsgCghgDTU3qxkSNC0mKaLoxcYExmrhw58IFKzcsjCEBTYwrrAEVExOIsqkujIkmBgSVNlAI7djp/HzznddFb4f+YDMTPXf13nPPc879O/AfzXUasJ8aPkcPWRLNkXQI2ANZ96R7ib1soqx3OB91Ej5M4rPjeo8+AGa1AB0BhH/M3nB9tiQv2JTHtx++m83oWe0yhFDZPnHVeicVOG73uxfJhGouckn82j5gFxmSMYa1JBd1Jir/TQdn4Kj1+iPKBXlZ3yT83j5gJ0Kjti/IOmeiO1VoHyBssx9XIcgpO29cbR/wEBmSETsYZIPT2Zv1INoCFKiV/Li6g/yBz+shfwswAM4VXaRFkj/XhA8idNgOOQSQ8HFhZqHljWAQcuxhjGFX4jtODM7/sQaRlvwxlcIF/qizFe4lifpJ8/5NXnMP44T285s/3c+N1oKBpfyHl36dGpzK/7W4Au6BXpvQ9tSlpFjRXmlssxULjOYmHbNSSkqKTaVnq0yvBBhW0fXwvhE6wHNb2RrcW/AwqpHgq9tHXTONVdvzTaI5O2W1FiCniZuPLv+xiMYDelXdSz773iYrzK4GzFKjOalLxvLQsMYbvhcokYcxPRU8i/Zh7lZtzQF7aJK5nZ60cgvh9bLfC5Cn0qcJK4b5b+1clfn1gLs0sa9sUvfO4RFeT+MH2QIv6EAof85Oam59B8wAVCkmNsPT6llGMMQV91NlB++rP8x8ygc079wfAHlsxvVwsNWhcgzpMkd4PvTta3qL63fv88wDoEaXdIV9DLY82/Q4hygB0NQJ/5lU+3cARGTL6S2NKg7bcAwQrk8XeFcL87ARICGCaxR5Yl2jvarj/GIkGwOgQdb0M0PsXrViWm/bl1ChDeumSLyj+EWcxIoVK67FF+NnCpnCBjFrLjZDTLKdo26EAjf0Nefq0zlq7QMAulDGx0RUVWXD4P/F/gEidGGJur0FoAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMS0wNVQxODo0OTo1MCswMDowMBRcY7AAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTEtMDVUMTM6NTM6NDgrMDA6MDCrIWVfAAAAAElFTkSuQmCC\"></li>\n<li><a href=\"https://github.com/pouchdb-community/pouchdb-authentication/blob/master/docs/api.md#dbsignupusername-password--options--callback\" target=\"_self\" rel=\"nofollow\">pouchdb.signUp</a> creates the user in CoudhDBs <em>users db  _ &#x3C;img class=\"emoji-icon\" data-icon=\"emoji-heavy</em>check_mark\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwEVPG3D+wAAAutJREFUSMetlE1slFUUhp9755uZznwdilKo0qZRS2DBpsgCghgDTU3qxkSNC0mKaLoxcYExmrhw58IFKzcsjCEBTYwrrAEVExOIsqkujIkmBgSVNlAI7djp/HzznddFb4f+YDMTPXf13nPPc879O/AfzXUasJ8aPkcPWRLNkXQI2ANZ96R7ib1soqx3OB91Ej5M4rPjeo8+AGa1AB0BhH/M3nB9tiQv2JTHtx++m83oWe0yhFDZPnHVeicVOG73uxfJhGouckn82j5gFxmSMYa1JBd1Jir/TQdn4Kj1+iPKBXlZ3yT83j5gJ0Kjti/IOmeiO1VoHyBssx9XIcgpO29cbR/wEBmSETsYZIPT2Zv1INoCFKiV/Li6g/yBz+shfwswAM4VXaRFkj/XhA8idNgOOQSQ8HFhZqHljWAQcuxhjGFX4jtODM7/sQaRlvwxlcIF/qizFe4lifpJ8/5NXnMP44T285s/3c+N1oKBpfyHl36dGpzK/7W4Au6BXpvQ9tSlpFjRXmlssxULjOYmHbNSSkqKTaVnq0yvBBhW0fXwvhE6wHNb2RrcW/AwqpHgq9tHXTONVdvzTaI5O2W1FiCniZuPLv+xiMYDelXdSz773iYrzK4GzFKjOalLxvLQsMYbvhcokYcxPRU8i/Zh7lZtzQF7aJK5nZ60cgvh9bLfC5Cn0qcJK4b5b+1clfn1gLs0sa9sUvfO4RFeT+MH2QIv6EAof85Oam59B8wAVCkmNsPT6llGMMQV91NlB++rP8x8ygc079wfAHlsxvVwsNWhcgzpMkd4PvTta3qL63fv88wDoEaXdIV9DLY82/Q4hygB0NQJ/5lU+3cARGTL6S2NKg7bcAwQrk8XeFcL87ARICGCaxR5Yl2jvarj/GIkGwOgQdb0M0PsXrViWm/bl1ChDeumSLyj+EWcxIoVK67FF+NnCpnCBjFrLjZDTLKdo26EAjf0Nefq0zlq7QMAulDGx0RUVWXD4P/F/gEidGGJur0FoAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMS0wNVQxODo0OTo1MCswMDowMBRcY7AAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTEtMDVUMTM6NTM6NDgrMDA6MDCrIWVfAAAAAElFTkSuQmCC\" /> _</li>\n<li>do not save username and password: PouchDB remains logged in as long as the cookie is valid <img class=\"emoji-icon\" data-icon=\"emoji-heavy_check_mark\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwEVPG3D+wAAAutJREFUSMetlE1slFUUhp9755uZznwdilKo0qZRS2DBpsgCghgDTU3qxkSNC0mKaLoxcYExmrhw58IFKzcsjCEBTYwrrAEVExOIsqkujIkmBgSVNlAI7djp/HzznddFb4f+YDMTPXf13nPPc879O/AfzXUasJ8aPkcPWRLNkXQI2ANZ96R7ib1soqx3OB91Ej5M4rPjeo8+AGa1AB0BhH/M3nB9tiQv2JTHtx++m83oWe0yhFDZPnHVeicVOG73uxfJhGouckn82j5gFxmSMYa1JBd1Jir/TQdn4Kj1+iPKBXlZ3yT83j5gJ0Kjti/IOmeiO1VoHyBssx9XIcgpO29cbR/wEBmSETsYZIPT2Zv1INoCFKiV/Li6g/yBz+shfwswAM4VXaRFkj/XhA8idNgOOQSQ8HFhZqHljWAQcuxhjGFX4jtODM7/sQaRlvwxlcIF/qizFe4lifpJ8/5NXnMP44T285s/3c+N1oKBpfyHl36dGpzK/7W4Au6BXpvQ9tSlpFjRXmlssxULjOYmHbNSSkqKTaVnq0yvBBhW0fXwvhE6wHNb2RrcW/AwqpHgq9tHXTONVdvzTaI5O2W1FiCniZuPLv+xiMYDelXdSz773iYrzK4GzFKjOalLxvLQsMYbvhcokYcxPRU8i/Zh7lZtzQF7aJK5nZ60cgvh9bLfC5Cn0qcJK4b5b+1clfn1gLs0sa9sUvfO4RFeT+MH2QIv6EAof85Oam59B8wAVCkmNsPT6llGMMQV91NlB++rP8x8ygc079wfAHlsxvVwsNWhcgzpMkd4PvTta3qL63fv88wDoEaXdIV9DLY82/Q4hygB0NQJ/5lU+3cARGTL6S2NKg7bcAwQrk8XeFcL87ARICGCaxR5Yl2jvarj/GIkGwOgQdb0M0PsXrViWm/bl1ChDeumSLyj+EWcxIoVK67FF+NnCpnCBjFrLjZDTLKdo26EAjf0Nefq0zlq7QMAulDGx0RUVWXD4P/F/gEidGGJur0FoAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMS0wNVQxODo0OTo1MCswMDowMBRcY7AAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTEtMDVUMTM6NTM6NDgrMDA6MDCrIWVfAAAAAElFTkSuQmCC\"></li>\n<li>pop up login form as no valid cookie exists <img class=\"emoji-icon\" data-icon=\"emoji-heavy_check_mark\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwEVPG3D+wAAAutJREFUSMetlE1slFUUhp9755uZznwdilKo0qZRS2DBpsgCghgDTU3qxkSNC0mKaLoxcYExmrhw58IFKzcsjCEBTYwrrAEVExOIsqkujIkmBgSVNlAI7djp/HzznddFb4f+YDMTPXf13nPPc879O/AfzXUasJ8aPkcPWRLNkXQI2ANZ96R7ib1soqx3OB91Ej5M4rPjeo8+AGa1AB0BhH/M3nB9tiQv2JTHtx++m83oWe0yhFDZPnHVeicVOG73uxfJhGouckn82j5gFxmSMYa1JBd1Jir/TQdn4Kj1+iPKBXlZ3yT83j5gJ0Kjti/IOmeiO1VoHyBssx9XIcgpO29cbR/wEBmSETsYZIPT2Zv1INoCFKiV/Li6g/yBz+shfwswAM4VXaRFkj/XhA8idNgOOQSQ8HFhZqHljWAQcuxhjGFX4jtODM7/sQaRlvwxlcIF/qizFe4lifpJ8/5NXnMP44T285s/3c+N1oKBpfyHl36dGpzK/7W4Au6BXpvQ9tSlpFjRXmlssxULjOYmHbNSSkqKTaVnq0yvBBhW0fXwvhE6wHNb2RrcW/AwqpHgq9tHXTONVdvzTaI5O2W1FiCniZuPLv+xiMYDelXdSz773iYrzK4GzFKjOalLxvLQsMYbvhcokYcxPRU8i/Zh7lZtzQF7aJK5nZ60cgvh9bLfC5Cn0qcJK4b5b+1clfn1gLs0sa9sUvfO4RFeT+MH2QIv6EAof85Oam59B8wAVCkmNsPT6llGMMQV91NlB++rP8x8ygc079wfAHlsxvVwsNWhcgzpMkd4PvTta3qL63fv88wDoEaXdIV9DLY82/Q4hygB0NQJ/5lU+3cARGTL6S2NKg7bcAwQrk8XeFcL87ARICGCaxR5Yl2jvarj/GIkGwOgQdb0M0PsXrViWm/bl1ChDeumSLyj+EWcxIoVK67FF+NnCpnCBjFrLjZDTLKdo26EAjf0Nefq0zlq7QMAulDGx0RUVWXD4P/F/gEidGGJur0FoAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMS0wNVQxODo0OTo1MCswMDowMBRcY7AAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTEtMDVUMTM6NTM6NDgrMDA6MDCrIWVfAAAAAElFTkSuQmCC\"></li>\n<li>log in <img class=\"emoji-icon\" data-icon=\"emoji-heavy_check_mark\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwEVPG3D+wAAAutJREFUSMetlE1slFUUhp9755uZznwdilKo0qZRS2DBpsgCghgDTU3qxkSNC0mKaLoxcYExmrhw58IFKzcsjCEBTYwrrAEVExOIsqkujIkmBgSVNlAI7djp/HzznddFb4f+YDMTPXf13nPPc879O/AfzXUasJ8aPkcPWRLNkXQI2ANZ96R7ib1soqx3OB91Ej5M4rPjeo8+AGa1AB0BhH/M3nB9tiQv2JTHtx++m83oWe0yhFDZPnHVeicVOG73uxfJhGouckn82j5gFxmSMYa1JBd1Jir/TQdn4Kj1+iPKBXlZ3yT83j5gJ0Kjti/IOmeiO1VoHyBssx9XIcgpO29cbR/wEBmSETsYZIPT2Zv1INoCFKiV/Li6g/yBz+shfwswAM4VXaRFkj/XhA8idNgOOQSQ8HFhZqHljWAQcuxhjGFX4jtODM7/sQaRlvwxlcIF/qizFe4lifpJ8/5NXnMP44T285s/3c+N1oKBpfyHl36dGpzK/7W4Au6BXpvQ9tSlpFjRXmlssxULjOYmHbNSSkqKTaVnq0yvBBhW0fXwvhE6wHNb2RrcW/AwqpHgq9tHXTONVdvzTaI5O2W1FiCniZuPLv+xiMYDelXdSz773iYrzK4GzFKjOalLxvLQsMYbvhcokYcxPRU8i/Zh7lZtzQF7aJK5nZ60cgvh9bLfC5Cn0qcJK4b5b+1clfn1gLs0sa9sUvfO4RFeT+MH2QIv6EAof85Oam59B8wAVCkmNsPT6llGMMQV91NlB++rP8x8ygc079wfAHlsxvVwsNWhcgzpMkd4PvTta3qL63fv88wDoEaXdIV9DLY82/Q4hygB0NQJ/5lU+3cARGTL6S2NKg7bcAwQrk8XeFcL87ARICGCaxR5Yl2jvarj/GIkGwOgQdb0M0PsXrViWm/bl1ChDeumSLyj+EWcxIoVK67FF+NnCpnCBjFrLjZDTLKdo26EAjf0Nefq0zlq7QMAulDGx0RUVWXD4P/F/gEidGGJur0FoAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMS0wNVQxODo0OTo1MCswMDowMBRcY7AAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTEtMDVUMTM6NTM6NDgrMDA6MDCrIWVfAAAAAElFTkSuQmCC\"></li>\n</ul>\n</li>\n<li>\n<p>server-side:</p>\n<ul>\n<li>on create user</li>\n<li><a href=\"http://docs.couchdb.org/en/stable/config/couch-peruser.html\" target=\"_self\" rel=\"nofollow\">create userDb</a> <img class=\"emoji-icon\" data-icon=\"emoji-heavy_check_mark\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwEVPG3D+wAAAutJREFUSMetlE1slFUUhp9755uZznwdilKo0qZRS2DBpsgCghgDTU3qxkSNC0mKaLoxcYExmrhw58IFKzcsjCEBTYwrrAEVExOIsqkujIkmBgSVNlAI7djp/HzznddFb4f+YDMTPXf13nPPc879O/AfzXUasJ8aPkcPWRLNkXQI2ANZ96R7ib1soqx3OB91Ej5M4rPjeo8+AGa1AB0BhH/M3nB9tiQv2JTHtx++m83oWe0yhFDZPnHVeicVOG73uxfJhGouckn82j5gFxmSMYa1JBd1Jir/TQdn4Kj1+iPKBXlZ3yT83j5gJ0Kjti/IOmeiO1VoHyBssx9XIcgpO29cbR/wEBmSETsYZIPT2Zv1INoCFKiV/Li6g/yBz+shfwswAM4VXaRFkj/XhA8idNgOOQSQ8HFhZqHljWAQcuxhjGFX4jtODM7/sQaRlvwxlcIF/qizFe4lifpJ8/5NXnMP44T285s/3c+N1oKBpfyHl36dGpzK/7W4Au6BXpvQ9tSlpFjRXmlssxULjOYmHbNSSkqKTaVnq0yvBBhW0fXwvhE6wHNb2RrcW/AwqpHgq9tHXTONVdvzTaI5O2W1FiCniZuPLv+xiMYDelXdSz773iYrzK4GzFKjOalLxvLQsMYbvhcokYcxPRU8i/Zh7lZtzQF7aJK5nZ60cgvh9bLfC5Cn0qcJK4b5b+1clfn1gLs0sa9sUvfO4RFeT+MH2QIv6EAof85Oam59B8wAVCkmNsPT6llGMMQV91NlB++rP8x8ygc079wfAHlsxvVwsNWhcgzpMkd4PvTta3qL63fv88wDoEaXdIV9DLY82/Q4hygB0NQJ/5lU+3cARGTL6S2NKg7bcAwQrk8XeFcL87ARICGCaxR5Yl2jvarj/GIkGwOgQdb0M0PsXrViWm/bl1ChDeumSLyj+EWcxIoVK67FF+NnCpnCBjFrLjZDTLKdo26EAjf0Nefq0zlq7QMAulDGx0RUVWXD4P/F/gEidGGJur0FoAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMS0wNVQxODo0OTo1MCswMDowMBRcY7AAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTEtMDVUMTM6NTM6NDgrMDA6MDCrIWVfAAAAAElFTkSuQmCC\"></li>\n<li>find projects with users email in projectDef.users and list them in projects key in the users doc in the _users db <img class=\"emoji-icon\" data-icon=\"emoji-construction\" style=\"display: inline; margin: 0; margin-top: -3px; position: relative; top: 3px; width: 20px\" src=\"data:image/png;base64, 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\"></li>\n</ul>\n</li>\n<li>\n<p>app-side:</p>\n<ul>\n<li><a href=\"https://github.com/pouchdb-community/pouchdb-authentication/blob/master/docs/api.md#dbgetuserusername--opts-callback\" target=\"_self\" rel=\"nofollow\">pouchdb.getUser</a></li>\n<li>create userDb</li>\n<li>create userDoc collection</li>\n<li>sync userDoc collection<br/>\ncatch if Sync errors because db does not yet exist</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"edit\"><a href=\"#edit\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>edit</h3>\n<ol>\n<li>\n<p>app-side:</p>\n<ul>\n<li>make sure billing info is valid</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"delete\"><a href=\"#delete\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>delete</h3>\n<ol>\n<li>\n<p>app-side</p>\n<ul>\n<li>menu to remove account with all data</li>\n<li>tell user what is going to be deleted, foremost: what projects</li>\n<li>let user confirm firmly by typing his email in to text field</li>\n<li>delete userDoc</li>\n</ul>\n</li>\n<li>\n<p>server-side</p>\n<ul>\n<li>on delete userDoc</li>\n<li>remove user from projects</li>\n<li>delete userDb</li>\n<li>delete user's projects</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"2-project--db\"><a href=\"#2-project--db\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. project / db</h2>\n<h3 id=\"create-1\"><a href=\"#create-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>create</h3>\n<ol>\n<li>\n<p>app-side:</p>\n<ul>\n<li>name it <code>project_userName_projectName</code> (replace @ &#x26; . with $$ &#x26; $) (hex encode user- and project name? <a href=\"https://stackoverflow.com/a/51624609\" target=\"_self\" rel=\"nofollow\">https://stackoverflow.com/a/51624609</a>)</li>\n<li>create new db and collections</li>\n<li>create projectDef doc in it's collection</li>\n<li>add projectDef.users</li>\n<li>add projectDef.billing</li>\n<li>check billing validity?</li>\n<li>copy projectDef doc to messageDb</li>\n</ul>\n</li>\n<li>\n<p>server-side:</p>\n<ul>\n<li>on new projectDef doc in messageDb</li>\n<li>create new project db, including <a href=\"http://docs.couchdb.org/en/latest/api/database/security.html\" target=\"_self\" rel=\"nofollow\">security doc</a></li>\n<li>add this user to admin members of project db (ensure only members can access it)</li>\n<li>loop projectDef.users</li>\n<li>add users as admin members to project db</li>\n<li>add dbName to every user's userDb projects list</li>\n<li>delete projectDef doc in messageDb</li>\n</ul>\n</li>\n<li>\n<p>app-side:</p>\n<ul>\n<li>on delete projectDef doc in messageDb</li>\n<li>sync project's collections</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"edit-1\"><a href=\"#edit-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>edit</h3>\n<ol>\n<li>\n<p>server-side</p>\n<ul>\n<li>on edit projectDef doc in project db</li>\n<li>if one of projectDef.users was removed, remove project name from userDoc's project list</li>\n<li>if one of projectDef.users was added, add project name in userDoc's project list</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"delete-1\"><a href=\"#delete-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>delete</h3>\n<ol>\n<li>\n<p>server-side</p>\n<ul>\n<li>on delete projectDef doc in project, i.e. db</li>\n<li>loop projectDef.users</li>\n<li>remove project name from userDoc's project list</li>\n<li>delete project db</li>\n</ul>\n</li>\n<li>\n<p>app-side</p>\n<ul>\n<li>TODO: need to clear data from rxdb/pouch?</li>\n</ul>\n</li>\n</ol>","frontmatter":{"date":"01.10.2018","path":"/Technische-Dokumentation/User-und-Projekte-verwalten","title":"User und Projekte verwalten"}},"allMarkdownRemark":{"edges":[{"node":{"id":"56e246c6-3d08-59a2-a0ae-8076ebd1ea2a","frontmatter":{"date":"04.10.2018","path":"/Technische-Dokumentation/PWA","title":"Progressive Web App"}}},{"node":{"id":"8f5c876e-5afa-5c68-afad-a021e5779b74","frontmatter":{"date":"04.10.2018","path":"/Technische-Dokumentation/Datenbank","title":"Datenbank"}}},{"node":{"id":"980960d7-341d-5603-b70e-3cc2f070ff6a","frontmatter":{"date":"01.10.2018","path":"/Technische-Dokumentation/User-und-Projekte-verwalten","title":"User und Projekte verwalten"}}},{"node":{"id":"48e4b448-144e-5d92-829d-9a537d4241d4","frontmatter":{"date":"01.10.2018","path":"/Technische-Dokumentation/Login","title":"Login"}}},{"node":{"id":"46b7d522-bfb3-5587-9e04-c30fe0385b55","frontmatter":{"date":"04.10.2018","path":"/Technische-Dokumentation/GitHub","title":"GitHub"}}}]}},"pageContext":{}}