{"data":{"markdownRemark":{"html":"<h2 id=\"1-user\"><a href=\"#1-user\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. user</h2>\n<h3 id=\"create\"><a href=\"#create\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>create</h3>\n<ol>\n<li>\n<p>server-side:</p>\n<ol>\n<li>on create user</li>\n<li>create userDb</li>\n<li>find projects with users email in projectDef.users and list them in userDb.projects</li>\n</ol>\n</li>\n<li>\n<p>app-side:</p>\n<ol>\n<li>create userDb</li>\n<li>create userDoc collection</li>\n<li>sync userDoc collection<br/>\ncatch if Sync errors because db does not yet exist</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"edit\"><a href=\"#edit\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>edit</h3>\n<ol>\n<li>\n<p>app-side:</p>\n<ol>\n<li>make sure billing info is valid</li>\n</ol>\n</li>\n<li>\n<p>delete user</p>\n<ol>\n<li>\n<p>app-side</p>\n<ol>\n<li>menu to remove account with all data</li>\n<li>delete userDoc</li>\n</ol>\n</li>\n<li>\n<p>server-side</p>\n<ol>\n<li>on delete userDoc</li>\n<li>remove user from projects</li>\n<li>delete userDb</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"project--db\"><a href=\"#project--db\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>project / db</h2>\n<h3 id=\"create-1\"><a href=\"#create-1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>create</h3>\n<pre><code>  app-side:\n</code></pre>\n<p>4.1.1 name it userName_projectName (replace @ &#x26; . with $$ &#x26; $)\n4.1.2 create new db and collections\n4.1.3 create projectDef doc in db\n4.1.4 add projectDef.users\n4.1.5 add projectDef.billing\n4.1.6 check billing validity?\n4.1.7 copy projectDef doc to messageDb\nserver-side:\n4.2.1 on new projectDef doc in messageDb\n4.2.2 create new db, including security doc\n4.2.3 add this user to admin members of project (ensure only members can access it)\n4.2.4 loop projectDef.users\n4.2.5 add users as admin members of project\n4.2.6 add dbName to every user's userDb projects list\n4.2.7 delete projectDef doc in messageDb\napp-side:\n4.3.1 on delete projectDef doc in messageDb\n4.3.2 sync project's collections</p>\n<ol start=\"5\">\n<li>\n<p>edit project\nserver-side\n5.1.1  on edit projectDef doc in project database\n5.1.2 if one of projectDef.users was removed, remove project name from userDoc's project list\n5.1.3 if one of projectDef.users was added, add project name in userDoc's project list</p>\n</li>\n<li>\n<p>delete project\nserver-side\n6.1.1 on delete projectDef doc in project, i.e. db\n6.1.2 loop projectDef.users\n6.1.3 remove project name from userDoc's project list\n6.1.4 delete project db\napp-side\n6.2.1 TODO: need to clear data from rxdb/pouch?</p>\n</li>\n</ol>","frontmatter":{"date":"01.10.2018","path":"/Technische-Dokumentation/User-und-Projekte-verwalten","title":"User und Projekte verwalten"}}},"pageContext":{}}