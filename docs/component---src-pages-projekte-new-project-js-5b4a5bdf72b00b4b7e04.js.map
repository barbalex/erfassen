{"version":3,"sources":["webpack:///./src/pages/Projekte/NewProject.js"],"names":["setConfig","pureSFC","rxdb","plugin","pouchdbAdapterHttp","pouchdbAdapterIdb","StyledDialog","styled","Dialog","withConfig","displayName","componentId","StyledDiv","div","StyledInput","Input","StyledFormHelperText","FormHelperText","withAuthState","_ref","newProjectOpen","setNewProjectOpen","authState","_useState","useState","projectName","setProjectName","_useState2","projectName2","setProjectName2","_useState3","nameHelperText","setNameHelperText","_useState4","name2HelperText","setName2HelperText","close","useCallback","onClickCreate","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","abrupt","test","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","Fragment","createProjectDb","t0","message","stop","this","onBlurName","event","target","value","onBlurName2","_components_ErrorBoundary__WEBPACK_IMPORTED_MODULE_17__","aria-labelledby","open","_material_ui_core_DialogTitle__WEBPACK_IMPORTED_MODULE_5___default","id","_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_9___default","error","fullWidth","aria-describedby","required","_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8___default","htmlFor","defaultValue","onBlur","autoFocus","autoComplete","autoCorrect","spellCheck","component","type","_material_ui_core_DialogActions__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_11___default","onClick","color","disabled"],"mappings":"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","file":"component---src-pages-projekte-new-project-js-5b4a5bdf72b00b4b7e04.js","sourcesContent":["// @flow\nimport React, { useState, useCallback } from 'react'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport Input from '@material-ui/core/Input'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport Button from '@material-ui/core/Button'\nimport styled from 'styled-components'\nimport rxdb from 'rxdb'\nimport pouchdbAdapterHttp from 'pouchdb-adapter-http'\nimport pouchdbAdapterIdb from 'pouchdb-adapter-idb'\n\nimport { setConfig } from 'react-hot-loader'\nsetConfig({ pureSFC: true })\n\nimport ErrorBoundary from '../../components/ErrorBoundary'\nimport withAuthState from '../../state/withAuth'\nimport createProjectDb from '../../utils/createProjectDb'\n\nrxdb.plugin(pouchdbAdapterHttp)\nrxdb.plugin(pouchdbAdapterIdb)\n\nconst StyledDialog = styled(Dialog)``\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 0 24px;\n`\nconst StyledInput = styled(Input)`\n  &:before {\n    border-bottom-color: rgba(0, 0, 0, 0.1) !important;\n  }\n`\nconst StyledFormHelperText = styled(FormHelperText)`\n  margin-bottom: 5px !important;\n  div {\n    padding: 2px 0;\n  }\n  li {\n    margin-bottom: 2px !important;\n  }\n`\n\nconst NewProject = ({ newProjectOpen, setNewProjectOpen, authState }) => {\n  const [projectName, setProjectName] = useState('')\n  const [projectName2, setProjectName2] = useState('')\n  const [nameHelperText, setNameHelperText] = useState('')\n  const [name2HelperText, setName2HelperText] = useState('')\n\n  const close = useCallback(() => setNewProjectOpen(false))\n  const onClickCreate = useCallback(\n    async () => {\n      // ensure names are equal\n      if (projectName !== projectName2) {\n        return setNameHelperText('Die Namen müssen übereinstimmen')\n      }\n      // ensure projectName is valid for couch db\n      if (!/^[a-z][a-z0-9_$()+/-]*$/.test(projectName)) {\n        return setNameHelperText(\n          <>\n            <div>Dieser Name ist leider nicht zulässig.</div>\n            <div>Regeln für Namen:</div>\n            <ul>\n              <li>Beginnt mit einem Buchstaben</li>\n              <li>Zulässig sind folgende Zeichen:</li>\n              <ul>\n                <li>Buchstaben</li>\n                <li>Zahlen</li>\n                <li>{`_, $, (, ), +, / und -`}</li>\n              </ul>\n            </ul>\n          </>,\n        )\n      }\n      // create new project\n      try {\n        await createProjectDb({ projectName, authState })\n      } catch (error) {\n        setNameHelperText(error.message)\n        return setName2HelperText(error.message)\n      }\n      setNameHelperText('')\n      setNewProjectOpen(false)\n    },\n    [projectName, projectName2],\n  )\n  const onBlurName = useCallback(event => setProjectName(event.target.value))\n  const onBlurName2 = useCallback(event => setProjectName2(event.target.value))\n\n  return (\n    <ErrorBoundary>\n      <StyledDialog aria-labelledby=\"login-dialog-title\" open={newProjectOpen}>\n        <DialogTitle id=\"login-dialog-title\">Neues Projekt</DialogTitle>\n        <StyledDiv>\n          <FormControl\n            error={!!nameHelperText}\n            fullWidth\n            aria-describedby=\"nameHelper\"\n            required={true}\n          >\n            <InputLabel htmlFor=\"projectName\">Name</InputLabel>\n            <StyledInput\n              id=\"projectName\"\n              defaultValue=\"\"\n              onBlur={onBlurName}\n              autoFocus\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              spellCheck={false}\n            />\n            <StyledFormHelperText id=\"nameHelper\" component=\"div\">\n              {nameHelperText}\n            </StyledFormHelperText>\n          </FormControl>\n          <FormControl\n            error={!!name2HelperText}\n            fullWidth\n            aria-describedby=\"loginName2Helper\"\n            required={true}\n          >\n            <InputLabel htmlFor=\"projectName2\">Name</InputLabel>\n            <StyledInput\n              id=\"projectName2\"\n              type=\"text\"\n              defaultValue=\"\"\n              onBlur={onBlurName2}\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              spellCheck={false}\n            />\n            <StyledFormHelperText id=\"loginName2Helper\" component=\"div\">\n              {name2HelperText || (\n                <>\n                  <span>Bitte den Namen prüfen und nochmals eingeben.</span>\n                  <br />\n                  <span>Er kann danach nicht mehr verändert werden</span>\n                </>\n              )}\n            </StyledFormHelperText>\n          </FormControl>\n        </StyledDiv>\n        <DialogActions>\n          <Button onClick={close}>abbrechen</Button>\n          <Button\n            color=\"primary\"\n            onClick={onClickCreate}\n            disabled={!(projectName && projectName2)}\n          >\n            Projekt erstellen\n          </Button>\n        </DialogActions>\n      </StyledDialog>\n    </ErrorBoundary>\n  )\n}\n\nexport default withAuthState(NewProject)\n"],"sourceRoot":""}