(window.webpackJsonp=window.webpackJsonp||[]).push([[10,3,11],{314:function(e,t,n){"use strict";n.r(t);var a=n(328),r=n.n(a),o=(n(331),n(329)),c=n.n(o),i=n(0),l=n.n(i),s=n(341),u=n.n(s),p=n(342),m=n.n(p),d=n(344),f=n.n(d),b=n(336),g=n.n(b),h=n(338),v=n.n(h),j=n(339),w=n.n(j),y=n(340),E=n.n(y),O=n(330),x=n.n(O),k=n(97),C=n(368),S=n(384),N=n(369),_=n(327),D=n(326),P=n(332),I=n(399);Object(_.setConfig)({pureSFC:!0}),C.a.plugin(S.a),C.a.plugin(N.a);var F=Object(k.b)(u.a).withConfig({displayName:"NewProject__StyledDialog",componentId:"sc-1ovkmsk-0"})([""]),q=k.b.div.withConfig({displayName:"NewProject__StyledDiv",componentId:"sc-1ovkmsk-1"})(["display:flex;flex-direction:column;padding:0 24px;"]),z=Object(k.b)(g.a).withConfig({displayName:"NewProject__StyledInput",componentId:"sc-1ovkmsk-2"})(["&:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),A=Object(k.b)(E.a).withConfig({displayName:"NewProject__StyledFormHelperText",componentId:"sc-1ovkmsk-3"})(["margin-bottom:5px !important;div{padding:2px 0;}li{margin-bottom:2px !important;}"]);t.default=Object(P.a)(function(e){var t=e.newProjectOpen,n=e.setNewProjectOpen,a=e.authState,o=Object(i.useState)(""),s=o[0],u=o[1],p=Object(i.useState)(""),d=p[0],b=p[1],g=Object(i.useState)(""),h=g[0],j=g[1],y=Object(i.useState)(""),E=y[0],O=y[1],k=Object(i.useCallback)(function(){return n(!1)}),C=Object(i.useCallback)(c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s===d){e.next=2;break}return e.abrupt("return",j("Die Namen müssen übereinstimmen"));case 2:if(/^[a-z][a-z0-9_$()+\/-]*$/.test(s)){e.next=4;break}return e.abrupt("return",j(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"Dieser Name ist leider nicht zulässig."),l.a.createElement("div",null,"Regeln für Namen:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Beginnt mit einem Buchstaben"),l.a.createElement("li",null,"Zulässig sind folgende Zeichen:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Buchstaben"),l.a.createElement("li",null,"Zahlen"),l.a.createElement("li",null,"_, $, (, ), +, / und -"))))));case 4:return e.prev=4,e.next=7,Object(I.a)({projectName:s,authState:a});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),j(e.t0.message),e.abrupt("return",O(e.t0.message));case 13:j(""),n(!1);case 15:case"end":return e.stop()}},e,this,[[4,9]])})),[s,d]),S=Object(i.useCallback)(function(e){return u(e.target.value)}),N=Object(i.useCallback)(function(e){return b(e.target.value)});return l.a.createElement(D.a,null,l.a.createElement(F,{"aria-labelledby":"login-dialog-title",open:t},l.a.createElement(m.a,{id:"login-dialog-title"},"Neues Projekt"),l.a.createElement(q,null,l.a.createElement(w.a,{error:!!h,fullWidth:!0,"aria-describedby":"nameHelper",required:!0},l.a.createElement(v.a,{htmlFor:"projectName"},"Name"),l.a.createElement(z,{id:"projectName",defaultValue:"",onBlur:S,autoFocus:!0,autoComplete:"off",autoCorrect:"off",spellCheck:!1}),l.a.createElement(A,{id:"nameHelper",component:"div"},h)),l.a.createElement(w.a,{error:!!E,fullWidth:!0,"aria-describedby":"loginName2Helper",required:!0},l.a.createElement(v.a,{htmlFor:"projectName2"},"Name"),l.a.createElement(z,{id:"projectName2",type:"text",defaultValue:"",onBlur:N,autoComplete:"off",autoCorrect:"off",spellCheck:!1}),l.a.createElement(A,{id:"loginName2Helper",component:"div"},E||l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Bitte den Namen prüfen und nochmals eingeben."),l.a.createElement("br",null),l.a.createElement("span",null,"Er kann danach nicht mehr verändert werden"))))),l.a.createElement(f.a,null,l.a.createElement(x.a,{onClick:k},"abbrechen"),l.a.createElement(x.a,{color:"primary",onClick:C,disabled:!(s&&d)},"Projekt erstellen"))))})},324:function(e,t,n){"use strict";n.r(t);n(429),n(152),n(98),n(688);var a=n(0),r=n.n(a),o=n(97),c=n(746),i=(n(745),n(327)),l=n(353),s=n(332),u=n(326),p=n(314);n(65);Object(i.setConfig)({pureSFC:!0});var m=o.b.div.withConfig({displayName:"Projekte__Container",componentId:"aidw08-0"})(["margin-top:64px;min-height:calc(100vh - 64px);"]),d=Object(o.b)(c.a).withConfig({displayName:"Projekte__ReflexContainer",componentId:"aidw08-1"})(["height:calc(100vh - 64px) !important;"]);t.default=Object(s.a)(function(e){var t=e.authState,n=t.state,o=n.dbs,i=n.email,s=n.loginOpen,f=Object(a.useState)(!1),b=f[0],g=f[1];Object(a.useEffect)(function(){i||s||t.setLoginOpen(!0)});var h=[];return o&&(h=Object.entries(o).filter(function(e){var t=e[0];return e[1],t.startsWith("project_")}).map(function(e){var t,n,a,r,o=e[0],c=e[1];return{name:(t={creatorName:i,dbName:o},n=t.creatorName,a=t.dbName,r="project_"+n.toLowerCase().replace("@","_at_").replace(".","_p_")+"_",a.replace(r,"")),db:c}})),r.a.createElement(u.a,null,r.a.createElement(l.a,null,r.a.createElement(m,null,r.a.createElement(d,{orientation:"vertical"},r.a.createElement(c.b,{flex:.3,propagateDimensions:!0,renderOnResizeRate:200,renderOnResize:!0},r.a.createElement("p",null,"Tree"),r.a.createElement("button",{onClick:function(){return g(!0)}},"create project"),h.map(function(e){return r.a.createElement("div",{key:e.name},e.name)})),r.a.createElement(c.c,null),r.a.createElement(c.b,{propagateDimensions:!0,renderOnResizeRate:200,renderOnResize:!0},r.a.createElement("p",null,"Form")))),b&&r.a.createElement(p.default,{newProjectOpen:b,setNewProjectOpen:g})))})},326:function(e,t,n){"use strict";n(40);var a=n(12),r=n.n(a),o=n(0),c=n.n(o),i=n(97),l=n(330),s=n.n(l),u=i.b.div.withConfig({displayName:"ErrorBoundary__Container",componentId:"qh8x2j-0"})(["margin:10px;"]),p=i.b.div.withConfig({displayName:"ErrorBoundary__ErrorTitle",componentId:"qh8x2j-1"})(["margin-bottom:10px;"]),m=Object(i.b)(s.a).withConfig({displayName:"ErrorBoundary__ReloadButton",componentId:"qh8x2j-2"})(["margin-top:10px !important;"]),d=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={error:null},n}return r()(t,e),t.getDerivedStateFromError=function(e){return{error:e}},t.prototype.render=function(){var e=this,t=this.state.error;if(t)return console.log("error:",t),c.a.createElement(u,null,c.a.createElement(p,null,"Oh je, es ist ein Fehler aufgetreten! Bericht:"),c.a.createElement("div",null,t.message),c.a.createElement(m,{variant:"outlined",onClick:function(){"undefined"!=typeof window&&window.location.reload(!1)}},"Neu laden"));var n=this.props.children;return c.a.Children.map(n,function(t){return c.a.cloneElement(t,Object.assign({},e.props))})},t}(o.Component);t.a=d},332:function(e,t,n){"use strict";n(40);var a=n(0),r=n.n(a),o=n(101),c=(n(98),n(444),n(152),n(150),n(328)),i=n.n(c),l=(n(331),n(329)),s=n.n(l),u=n(12),p=n.n(u),m=n(41),d=n.n(m),f=n(391),b=n.n(f),g=(n(177),n(84)),h=n(499),v=n(366),j=n.n(v),w=(n(345),n(368)),y=n(384),E=n(369),O=n(427),x=n(373);w.a.plugin(y.a),w.a.plugin(E.a);var k=function(){var e=s()(i.a.mark(function e(t){var n,a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.create({name:"messages",adapter:"idb"});case 3:n=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:return e.next=11,n.collection({name:"projectdef",schema:O,pouchSettings:{fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return t.credentials="include",fetch(e,t)})}});case 11:return a=e.sent,t.addDb({name:"messages",db:n}),console.log("createMessageDb",{messageDb:n,projectDefCollection:a}),e.next=16,a.sync({remote:Object(x.a)()+"/messages/",options:{live:!0,retry:!0},query:n.projectdef.find().where("type").eq("projectDef")});case 16:r=e.sent,t.addSync({name:"messageDbProjectDef",sync:r});case 18:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),C=(n(65),function(){if("undefined"==typeof window)return"https://erfassen.ch:5984/erfassen";var e="localhost"===window.location.hostname.replace("www.",""),t=e?"localhost":window.location.hostname;return e?"http://"+t+":5984/erfassen":"https://erfassen.ch:5984/erfassen"}),S=(n(159),n(160),n(428)),N=(n(461),n(464),n(429),n(409),n(466)),_=n.n(N),D=n(399),P=function(e){var t=e.projects,n=e.authState,a=n.state.dbs;if(!a)return console.log("provideProjectDbs: no dbs found");var r=Object.keys(a).filter(function(e){return e.startsWith("project_")}),o=_()(t,r),c=_()(r,t);console.log("provideProjectDbs",{existingProjects:r,usersProjects:t,projectsToAdd:o,projectsToRemove:c});var i=o,l=Array.isArray(i),s=0;for(i=l?i:i[Symbol.iterator]();;){var u;if(l){if(s>=i.length)break;u=i[s++]}else{if((s=i.next()).done)break;u=s.value}var p=u;Object(D.a)({projectName:p,authState:n})}};w.a.plugin(E.a);var I=function(){var e=s()(i.a.mark(function e(t){var n,a,r,o,c,l,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authState,a=t.email,r=n.state,o=r.dbs,c=r.syncs,l=b()(a),e.prev=3,e.next=6,w.a.create({name:l,adapter:"idb",pouchSettings:{fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return t.credentials="include",fetch(e,t)})}});case 6:return s=e.sent,e.next=9,s.collection({name:"user",schema:S,pouchSettings:{fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return t.credentials="include",fetch(e,t)})}});case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(3),!e.t0.message.includes("already exists")){e.next=18;break}return console.log("user db already exists"),e.abrupt("return");case 18:throw e.t0;case 19:return n.addDb({name:l,db:s}),!!c&&!!c[l]||(u=s.user.sync({remote:Object(x.a)()+"/"+l+"/",options:{live:!0,retry:!0},query:s.user.find().where("type").eq("user")})),n.addSync({name:"user",sync:u}),u.docs$.subscribe(function(e){return P({projects:e.projects,authState:n})}),console.log("createAndSyncUserCollection",{dbs:o,userDb:s,userDbName:l,sync:u}),e.abrupt("return");case 26:case"end":return e.stop()}},e,this,[[3,11]])}));return function(t){return e.apply(this,arguments)}}();g.a.plugin(h.a);var F=function(e){function t(){var t;(t=e.call(this)||this).setAuthDb=function(e){t.setState({authDb:e})},t.setEmail=function(e){t.setState({email:e})},t.setSignupOpen=function(e){t.setState({signupOpen:e})},t.setLoginOpen=function(e){t.setState({loginOpen:e})},t.signUp=function(){var e=s()(i.a.mark(function e(n){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.email,r=n.password,e.prev=1,e.next=4,t.logOut();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Auth, signUp: Error logging out:",e.t0);case 9:return e.prev=9,e.next=12,t.state.authDb.signUp(a,r);case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log("Signup: error logging in:",e.t1);case 17:return t.setSignupOpen(!1),e.prev=18,e.next=21,t.logIn({email:a,password:r});case 21:e.next=26;break;case 23:throw e.prev=23,e.t2=e.catch(18),e.t2;case 26:case"end":return e.stop()}},e,this,[[1,6],[9,14],[18,23]])}));return function(t){return e.apply(this,arguments)}}(),t.logIn=function(){var e=s()(i.a.mark(function e(n){var a,r,o,c,l,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.email,r=n.password,e.next=3,t.logOut();case 3:return e.prev=3,e.next=6,t.state.authDb.logIn(a,r);case 6:o=e.sent,e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(3),"unauthorized"!==e.t0.name&&"forbidden"!==e.t0.name){e.next=15;break}throw new Error("Name oder Passwort stimmt nicht");case 15:throw e.t0;case 16:return t.setState({email:o.name,loginOpen:!1,authDb:new g.a(C())}),e.next=19,I({email:a,authState:d()(d()(t))});case 19:return e.next=21,k(d()(d()(t))).catch(function(e){throw e});case 21:return c=b()(a),l=t.state.dbs[c],s=l.user,e.next=26,s.find().exec();case 26:(u=e.sent)&&u[0]&&(console.log("logIn",{userDbName:c,userDb:l,userCollection:s,userDoc:u[0]}),P({projects:u[0].projects,authState:d()(d()(t))}));case 28:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}(),t.logOut=s()(i.a.mark(function e(){var n,a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.state.authDb.logOut();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:if(n=t.state,a=n.dbs,r=n.syncs,a){e.next=11;break}return e.abrupt("return");case 11:return Object.values(a).forEach(function(e){return e.remove()}),Object.values(r).forEach(function(e){return e.cancel()}),t.setState({email:null,loginOpen:!1,dbs:null,syncs:{}}),e.abrupt("return");case 15:case"end":return e.stop()}},e,this,[[0,5]])})),t.setDbs=function(e){t.setState({dbs:e})},t.addDb=function(e){var n=e.name,a=e.db;t.setState(function(e){var t;console.log("Auth, addDb",{dbs:e.dbs});var r=Object.assign({},e.dbs,((t={})[n]=a,t));return console.log("Auth, addDb",{newDbs:r}),window.dbs=r,{dbs:r}})},t.setSyncs=function(e){t.setState({syncs:e})},t.addSync=function(e){var n=e.name,a=e.sync;t.setState(function(e){var t,r=Object.assign({},e.syncs,((t={})[n]=a,t));return{dbs:e.dbs,syncs:r}})};var n=new g.a(C()),a="undefined"==typeof window?null:window.dbs||null;return t.state={authDb:n,email:null,signupOpen:!1,loginOpen:!1,dbs:a,syncs:{}},n.getSession().then(function(e){var n=j()(e,"userCtx.name",null);n&&(t.setState({email:n}),I({email:n,authState:d()(d()(t))}),("undefined"!=typeof window&&!window.dbs||"undefined"==typeof window)&&k(d()(d()(t))).catch(function(e){throw e}))}).catch(function(e){throw e}),t}return p()(t,e),t}(o.a);t.a=function(e){return function(t){return r.a.createElement(o.c,{to:[F]},function(n){return r.a.createElement(e,Object.assign({authState:n},t))})}}},351:function(e){e.exports={data:{site:{siteMetadata:{title:"erfassen"}}}}},353:function(e,t,n){"use strict";var a=n(351),r=n(0),o=n.n(r),c=n(370),i=n.n(c),l=n(58),s=(n(345),n(377)),u=n.n(s),p=n(378),m=n.n(p),d=n(343),f=n.n(d),b=n(330),g=n.n(b),h=n(97),v=n(24),j=n(327),w=n(334),y=n.n(w),E=n(376),O=n.n(E),x=n(375),k=n.n(x),C=n(374),S=n(328),N=n.n(S),_=(n(331),n(329)),D=n.n(_),P=n(341),I=n.n(P),F=n(342),q=n.n(F),z=n(344),A=n.n(z),B=n(336),L=n.n(B),H=n(338),T=n.n(H),R=n(349),W=n.n(R),K=n(339),U=n.n(K),$=n(340),M=n.n($),V=n(348),Z=n.n(V),J=n(350),Q=n(326),G=n(332);Object(j.setConfig)({pureSFC:!0});var X=Object(h.b)(I.a).withConfig({displayName:"Signup__StyledDialog",componentId:"sc-17e34hu-0"})([""]),Y=h.b.div.withConfig({displayName:"Signup__StyledDiv",componentId:"sc-17e34hu-1"})(["display:flex;flex-direction:column;padding:0 24px;"]),ee=Object(h.b)(Z.a).withConfig({displayName:"Signup__StyledTextField",componentId:"sc-17e34hu-2"})(["div:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),te=Object(h.b)(L.a).withConfig({displayName:"Signup__StyledInput",componentId:"sc-17e34hu-3"})(["&:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),ne=Object(G.a)(function(e){var t=e.authState,n=Object(r.useState)(""),a=n[0],c=n[1],i=Object(r.useState)(""),l=i[0],s=i[1],u=Object(r.useState)(!1),p=u[0],m=u[1],d=Object(r.useState)(""),f=d[0],b=(d[1],Object(r.useState)("")),h=b[0],v=(b[1],Object(r.useCallback)(function(){return t.setSignupOpen(!1)},[])),j=Object(r.useCallback)(D()(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.signUp({email:a,password:l});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Signup: error logging in:",e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])})),[a,l]),w=Object(r.useCallback)(function(){m(!p)},[p]),E=Object(r.useCallback)(function(e){return c(e.target.value)},[]),O=Object(r.useCallback)(function(e){return s(e.target.value)},[]);return o.a.createElement(Q.a,null,o.a.createElement(X,{"aria-labelledby":"dialog-title",open:t.state.signupOpen},o.a.createElement(q.a,{id:"dialog-title"},"Neues Konto"),o.a.createElement(Y,null,o.a.createElement(ee,{label:"Email",defaultValue:a,onBlur:E,autoFocus:!0,fullWidth:!0,helperText:f}),o.a.createElement(U.a,{error:!!h,fullWidth:!0,"aria-describedby":"signupPasswortHelper"},o.a.createElement(T.a,{htmlFor:"signupPasswort"},"Passwort"),o.a.createElement(te,{id:"signupPasswort",type:p?"text":"password",defaultValue:l,onBlur:O,onKeyPress:function(e){"Enter"===e.key&&O()},autoComplete:"current-password",autoCorrect:"off",spellCheck:"false",endAdornment:o.a.createElement(W.a,{position:"end"},o.a.createElement(y.a,{onClick:w,onMouseDown:function(e){return e.preventDefault()},title:p?"verstecken":"anzeigen"},p?o.a.createElement(J.b,null):o.a.createElement(J.a,null)))}),o.a.createElement(M.a,{id:"signupPasswortHelper"},h))),o.a.createElement(A.a,null,o.a.createElement(g.a,{onClick:v},"abbrechen"),o.a.createElement(g.a,{color:"primary",onClick:j},"Konto erstellen"))))});Object(j.setConfig)({pureSFC:!0});var ae=Object(h.b)(I.a).withConfig({displayName:"Login__StyledDialog",componentId:"czqfs7-0"})([""]),re=h.b.div.withConfig({displayName:"Login__StyledDiv",componentId:"czqfs7-1"})(["display:flex;flex-direction:column;padding:0 24px;"]),oe=Object(h.b)(Z.a).withConfig({displayName:"Login__StyledTextField",componentId:"czqfs7-2"})(["div:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),ce=Object(h.b)(L.a).withConfig({displayName:"Login__StyledInput",componentId:"czqfs7-3"})(["&:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),ie=Object(G.a)(function(e){var t=e.authState,n=t.setLoginOpen,a=t.setSignupOpen,c=t.logIn,i=t.state.loginOpen,l=Object(r.useState)(""),s=l[0],u=l[1],p=Object(r.useState)(""),m=p[0],d=p[1],f=Object(r.useState)(!1),b=f[0],h=f[1],v=Object(r.useState)(""),j=v[0],w=v[1],E=Object(r.useState)(""),O=E[0],x=E[1],k=Object(r.useCallback)(function(){return n(!1)},[]),C=Object(r.useCallback)(function(){n(!1),a(!0)},[]),S=Object(r.useCallback)(D()(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({email:s,password:m});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error logging in:",e.t0),w(e.t0.message),x(e.t0.message);case 10:case"end":return e.stop()}},e,this,[[0,5]])})),[s,m]),_=Object(r.useCallback)(function(){return h(!b)},[b]),P=Object(r.useCallback)(function(e){u(e.target.value)},[]),I=Object(r.useCallback)(function(e){return d(e.target.value)},[]);return o.a.createElement(Q.a,null,o.a.createElement(ae,{"aria-labelledby":"login-dialog-title",open:i},o.a.createElement(q.a,{id:"login-dialog-title"},"Anmeldung"),o.a.createElement(re,null,o.a.createElement(oe,{label:"Email",value:s,onChange:P,autoFocus:!0,fullWidth:!0,helperText:j}),o.a.createElement(U.a,{error:!!O,fullWidth:!0},o.a.createElement(T.a,{htmlFor:"loginPasswort"},"Passwort"),o.a.createElement(ce,{id:"loginPasswort",type:b?"text":"password",value:m,onChange:I,autoComplete:"current-password",autoCorrect:"off",spellCheck:"false",endAdornment:o.a.createElement(W.a,{position:"end"},o.a.createElement(y.a,{onClick:_,onMouseDown:function(e){return e.preventDefault()},title:b?"verstecken":"anzeigen"},b?o.a.createElement(J.b,null):o.a.createElement(J.a,null)))}),o.a.createElement(M.a,null,O))),o.a.createElement(A.a,null,o.a.createElement(g.a,{onClick:k},"abbrechen"),o.a.createElement(g.a,{color:"primary",onClick:S},"Anmelden"),o.a.createElement(g.a,{onClick:C},"Neues Konto"))))});Object(j.setConfig)({pureSFC:!0});var le=h.b.div.withConfig({displayName:"Account__IconContainer",componentId:"sc-1ioq2ng-0"})(["position:relative;padding-left:10px;"]),se=h.b.div.withConfig({displayName:"Account__UserNameDiv",componentId:"sc-1ioq2ng-1"})(["position:absolute;bottom:0;font-size:10px;width:60px;left:5px;text-align:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;z-index:-1;"]),ue=Object(G.a)(function(e){var t=e.authState,n=t.state,a=n.email,c=n.signupOpen,i=n.loginOpen,l=Object(r.useState)(null),s=l[0],u=l[1],p=Object(r.useCallback)(function(e){return u(e.currentTarget)},[]),m=Object(r.useCallback)(function(){return u(null)},[]),d=Object(r.useCallback)(function(){u(null),t.setSignupOpen(!c)},[]),f=Object(r.useCallback)(function(){u(null),t.setLoginOpen(!i)},[]),b=Object(r.useCallback)(function(){u(null),t.logOut()},[]);return o.a.createElement(Q.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(le,null,o.a.createElement(y.a,{"aria-haspopup":"true","aria-label":"Konto",onClick:p,color:"inherit",title:"Konto"},o.a.createElement(C.a,null)),o.a.createElement(se,null,a||"")),o.a.createElement(k.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:!!s,onClose:m},!a&&o.a.createElement(O.a,{onClick:f},"Anmelden"),a&&o.a.createElement(O.a,{onClick:b},"Abmelden"),o.a.createElement(O.a,{onClick:d},"Konto erstellen")),c&&o.a.createElement(ne,null),i&&o.a.createElement(ie,null)))});Object(j.setConfig)({pureSFC:!0});var pe=Object(h.b)(f.a).withConfig({displayName:"Header__SiteTitle",componentId:"sc-9u5ymu-0"})(["display:none;cursor:pointer;@media (min-width:700px){display:block;}"]),me=h.b.div.withConfig({displayName:"Header__Spacer",componentId:"sc-9u5ymu-1"})(["flex-grow:1;"]),de=Object(h.b)(g.a).withConfig({displayName:"Header__NavButton",componentId:"sc-9u5ymu-2"})(["color:white !important;border:",";border-color:rgba(255,255,255,0.5) !important;font-weight:",";"],function(e){return e.active?"1px white":"unset"},function(e){return e.active?"700":"600"}),fe=function(){var e=Object(r.useCallback)(function(){return Object(l.navigate)("/")});return o.a.createElement(v.Location,null,function(t){var n=t.location.pathname;return o.a.createElement(Q.a,null,o.a.createElement(u.a,{position:"fixed"},o.a.createElement(m.a,null,o.a.createElement(pe,{variant:"h6",color:"inherit",noWrap:!0,title:"Home",onClick:e},"erfassen.ch"),o.a.createElement(me,null),o.a.createElement(de,{variant:"/"===n?"outlined":"text",component:l.Link,to:"/",active:("/"===n).toString()},"Home"),o.a.createElement(de,{variant:"/Projekte/"===n?"outlined":"text",component:l.Link,to:"/Projekte/",active:("/Projekte/"===n).toString()},"Projekte"),o.a.createElement(ue,null))))})};t.a=function(e){var t=e.children;return o.a.createElement(l.StaticQuery,{query:"4130953669",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},o.a.createElement("html",{lang:"en"})),o.a.createElement(fe,null),t)},data:a})}},373:function(e,t,n){"use strict";n(65);t.a=function(){if("undefined"==typeof window)return"https://erfassen.ch:5984";var e="localhost"===window.location.hostname.replace("www.",""),t=e?"localhost":window.location.hostname;return e?"http://"+t+":5984":"https://erfassen.ch:5984"}},391:function(e,t,n){n(65),e.exports=function(e){return"user_"+e.toLowerCase().replace("@","_at_").replace(".","_p_")}},399:function(e,t,n){"use strict";var a=n(328),r=n.n(a),o=(n(150),n(345),n(159),n(160),n(152),n(98),n(409),n(331),n(329)),c=n.n(o),i=n(368),l=n(384),s=n(369),u=(n(65),function(e){var t=e.creatorName,n=e.projectName,a="project_"+t.toLowerCase().replace("@","_at_").replace(".","_p_")+"_"+n;return/^[a-z][a-z0-9_$()+\/-]*$/.test(a)?a:console.log("Name is not valid db name")}),p=n(430),m=n(373);i.a.plugin(l.a),i.a.plugin(s.a);t.a=function(){var e=c()(r.a.mark(function e(t){var n,a,o,c,l,s,d,f,b;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectName,a=t.authState,o=a.state,c=o.dbs,l=o.email,s=u({creatorName:l,projectName:n}),!Object.keys(c).includes(s)){e.next=6;break}throw new Error("Dieser Name wird schon benutzt");case 6:return e.prev=6,e.next=9,c.messages.projectdef.insert({projectName:n,creatorName:l,type:"projectDef"});case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),e.t0;case 14:return e.prev=14,e.next=17,i.a.create({name:s,adapter:"idb"});case 17:d=e.sent,e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(14),e.t1;case 23:return e.next=25,d.collection({name:"projectdef",schema:p,pouchSettings:{fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return t.credentials="include",fetch(e,t)})}});case 25:return f=e.sent,a.addDb({name:s,db:d}),e.next=29,f.sync({remote:Object(m.a)()+"/"+s+"/",options:{live:!0,retry:!0},query:d.projectdef.find().where("type").eq("projectDef")});case 29:return b=e.sent,a.addSync({name:s+"ProjectDef",sync:b}),console.log("NewProject",{projectDefCollection:f}),e.prev=32,e.next=35,f.insert({_id:"projectDef",projectName:n,creatorName:l,type:"projectDef"});case 35:e.next=40;break;case 37:throw e.prev=37,e.t2=e.catch(32),e.t2;case 40:console.log("finished creating new project");case 41:case"end":return e.stop()}},e,this,[[6,11],[14,20],[32,37]])}));return function(t){return e.apply(this,arguments)}}()},427:function(e){e.exports={title:"project definition schema",version:0,description:"describes a project",type:"object",properties:{type:{type:"string"},projectName:{type:"string"},creatorName:{type:"string"}},required:["projectName","creatorName"]}},428:function(e){e.exports={title:"user doc schema",version:0,description:"describes a user doc",type:"object",properties:{type:{type:"string"},email:{type:"string"},projects:{type:"array",items:{type:"string"}}},required:["email","type"]}},430:function(e){e.exports={title:"project definition schema",version:0,description:"describes a project",type:"object",properties:{type:{type:"string"},projectName:{type:"string"},creatorName:{type:"string"}},required:["projectName","creatorName"]}},451:function(e,t){},460:function(e,t){}}]);
//# sourceMappingURL=component---src-pages-projekte-index-js-d9beeccaf052dd27cffe.js.map