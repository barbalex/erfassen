(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{307:function(e,t,n){"use strict";n(35),n(85);var r=n(9),a=n.n(r),o=n(0),i=n.n(o),s=n(84),c=n(327),l=n.n(c),u=s.b.div.withConfig({displayName:"ErrorBoundary__Container",componentId:"sc-1fvc7se-0"})(["margin:10px;"]),p=s.b.div.withConfig({displayName:"ErrorBoundary__ErrorTitle",componentId:"sc-1fvc7se-1"})(["margin-bottom:10px;"]),d=Object(s.b)(l.a).withConfig({displayName:"ErrorBoundary__ReloadButton",componentId:"sc-1fvc7se-2"})(["margin-top:10px !important;"]),m=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={error:null,errorInfo:null},n}a()(t,e);var n=t.prototype;return n.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},n.render=function(){var e=this,t=this.state.errorInfo;if(t)return console.log("errorInfo:",t),i.a.createElement(u,null,i.a.createElement(p,null,"Oh je, es ist ein Fehler aufgetreten! Bericht:"),i.a.createElement("div",null,t.componentStack),i.a.createElement(d,{variant:"outlined",onClick:function(){"undefined"!=typeof window&&window.location.reload(!1)}},"Neu laden"));var n=this.props.children;return i.a.Children.map(n,function(t){return i.a.cloneElement(t,Object.assign({},e.props))})},t}(o.Component);t.a=m},333:function(e,t,n){"use strict";var r=n(451),a=n(0),o=n.n(a),i=n(452),s=n.n(i),c=n(57),l=(n(367),n(368),n(607)),u=n.n(l),p=n(609),d=n.n(p),m=n(321),f=n.n(m),h=n(327),g=n.n(h),w=n(84),b=n(19),E=n(314),y=n.n(E),v=n(319),x=n.n(v),S=(n(349),n(382)),k=n.n(S),C=n(604),P=n.n(C),O=n(595),_=n.n(O),D=n(594),I=n(369),T=n.n(I),j=n(309),q=n.n(j),N=(n(326),n(310)),B=n.n(N),A=n(410),L=n.n(A),H=n(421),z=n.n(H),F=n(427),K=n.n(F),M=n(417),R=n.n(M),W=n(423),U=n.n(W),V=n(425),J=n.n(V),Q=n(422),G=n.n(Q),X=n(424),Y=n.n(X),Z=n(426),$=n(307),ee=n(366),te=n(448),ne=(n(160),n(447)),re=n(449),ae=n(559),oe=n.n(ae),ie=n(560);ne.a.plugin(re.a);var se=function(){var e=B()(q.a.mark(function e(t){var n,r,a,o,i,s,c,l,u;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rxDbState,r=t.email,a=n.state,o=a.dbs,i=a.syncs,s=oe()(r),console.log("createAndSyncUserCollections",{dbs:o,syncs:i,rxDbState:n}),ne.a.isRxDatabase(o[s])){e.next=10;break}return e.next=7,ne.a.create({name:s,adapter:"idb"});case 7:return c=e.sent,e.next=10,c.collection({name:"user",schema:ie});case 10:n.addDb({name:s,db:c}),l=!!i&&!!i[s],console.log("createAndSyncUserCollections",{dbs:o}),l||(u=c.user.sync({remote:"http://localhost:5984/"+s+"/",options:{live:!0,retry:!0},query:c.user.find().where("type").eq("user")})),n.addSync({name:s,sync:u}),console.log("Signup",{dbs:o,userDbName:s});case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ce=Object(w.b)(L.a).withConfig({displayName:"Signup__StyledDialog",componentId:"sc-1xn6wqs-0"})([""]),le=w.b.div.withConfig({displayName:"Signup__StyledDiv",componentId:"sc-1xn6wqs-1"})(["display:flex;flex-direction:column;padding:0 24px;"]),ue=Object(w.b)(R.a).withConfig({displayName:"Signup__StyledInput",componentId:"sc-1xn6wqs-2"})(["&:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),pe=y()(ee.a,te.a,T()("email","setEmail",""),T()("password","setPassword",""),T()("showPass","setShowPass",!1),T()("emailErrorText","setEmailErrorText",""),T()("passwordErrorText","setPasswordErrorText",""),x()({close:function(e){var t=e.authState;return function(){return t.setSignupOpen(!1)}},onClickSignup:function(e){var t=e.email,n=e.password,r=e.authState,a=e.rxDbState;return B()(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.state.authDb.signUp(t,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Signup: error logging in:",e.t0);case 8:return e.prev=8,e.next=11,r.logIn({email:t,password:n});case 11:e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(8),e.t1;case 16:se({rxDbState:a,email:t});case 17:case"end":return e.stop()}},e,this,[[0,5],[8,13]])}))},onToggleShowPass:function(e){var t=e.showPass,n=e.setShowPass;return function(){n(!t)}}}),x()({onBlurEmail:function(e){var t=e.setEmail;return function(e){return t(e.target.value)}},onBlurPassword:function(e){var t=e.setPassword;return function(e){return t(e.target.value)}}}))(function(e){var t=e.email,n=e.password,r=e.showPass,a=(e.setShowPass,e.emailErrorText),i=e.passwordErrorText,s=(e.setEmailErrorText,e.setPasswordErrorText,e.onBlurEmail),c=e.onBlurPassword,l=e.onClickSignup,u=(e.user,e.close),p=e.onToggleShowPass,d=(e.db,e.authState);return o.a.createElement($.a,null,o.a.createElement(ce,{"aria-labelledby":"dialog-title",open:d.state.signupOpen},o.a.createElement(z.a,{id:"dialog-title"},"Neues Konto"),o.a.createElement(le,null,o.a.createElement(G.a,{error:!!a,fullWidth:!0,"aria-describedby":"emailHelper"},o.a.createElement(U.a,{htmlFor:"email"},"Email"),o.a.createElement(ue,{id:"email",defaultValue:t,onBlur:s,autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&s()}}),o.a.createElement(Y.a,{id:"emailHelper"},a)),o.a.createElement(G.a,{error:!!i,fullWidth:!0,"aria-describedby":"passwortHelper"},o.a.createElement(U.a,{htmlFor:"passwort"},"Passwort"),o.a.createElement(ue,{id:"passwort",type:r?"text":"password",defaultValue:n,onBlur:c,onKeyPress:function(e){"Enter"===e.key&&c()},autoComplete:"current-password",autoCorrect:"off",spellCheck:"false",endAdornment:o.a.createElement(J.a,{position:"end"},o.a.createElement(k.a,{onClick:p,onMouseDown:function(e){return e.preventDefault()},title:r?"verstecken":"anzeigen"},r?o.a.createElement(Z.b,null):o.a.createElement(Z.a,null)))}),o.a.createElement(Y.a,{id:"passwortHelper"},i))),o.a.createElement(K.a,null,o.a.createElement(g.a,{onClick:u},"abbrechen"),o.a.createElement(g.a,{color:"primary",onClick:l},"Konto erstellen"))))}),de=n(428),me=w.b.div.withConfig({displayName:"Account__IconContainer",componentId:"huyud8-0"})(["position:relative;padding-left:10px;"]),fe=w.b.div.withConfig({displayName:"Account__UserNameDiv",componentId:"huyud8-1"})(["position:absolute;bottom:0;font-size:10px;width:60px;left:5px;text-align:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;z-index:-1;"]),he=y()(ee.a,T()("anchorEl","setAnchorEl",null),x()({onClickMenu:function(e){var t=e.setAnchorEl;return function(e){return t(e.currentTarget)}},onCloseMenu:function(e){var t=e.setAnchorEl;return function(){return t(null)}},onClickSignup:function(e){var t=e.setAnchorEl,n=e.authState;return function(){t(null),n.setSignupOpen(!n.state.signupOpen)}},onClickLogin:function(e){var t=e.setAnchorEl,n=e.authState;return function(){t(null),n.setLoginOpen(!n.state.loginOpen)}},onClickLogout:function(e){var t=e.setAnchorEl,n=e.authState;return function(){t(null),n.logOut()}}}))(function(e){var t=e.anchorEl,n=e.onCloseMenu,r=e.onClickMenu,a=e.onClickSignup,i=e.onClickLogout,s=e.onClickLogin,c=e.authState.state,l=c.name,u=c.signupOpen,p=c.loginOpen;return o.a.createElement($.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(me,null,o.a.createElement(k.a,{"aria-haspopup":"true","aria-label":"Konto",onClick:r,color:"inherit",title:"Konto"},o.a.createElement(D.a,null)),o.a.createElement(fe,null,l||"")),o.a.createElement(_.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:!!t,onClose:n},!l&&o.a.createElement(P.a,{onClick:s},"Anmelden"),l&&o.a.createElement(P.a,{onClick:i},"Abmelden"),o.a.createElement(P.a,{onClick:a},"Konto erstellen")),u&&o.a.createElement(pe,null),p&&o.a.createElement(de.a,null)))}),ge=Object(w.b)(f.a).withConfig({displayName:"Header__SiteTitle",componentId:"sc-1q5cq7d-0"})(["display:none;cursor:pointer;@media (min-width:700px){display:block;}"]),we=w.b.div.withConfig({displayName:"Header__Spacer",componentId:"sc-1q5cq7d-1"})(["flex-grow:1;"]),be=Object(w.b)(g.a).withConfig({displayName:"Header__NavButton",componentId:"sc-1q5cq7d-2"})(["color:white !important;border:",";border-color:rgba(255,255,255,0.5) !important;font-weight:",";"],function(e){return e.active?"1px white":"unset"},function(e){return e.active?"700":"600"}),Ee=y()(x()({onClickSiteTitle:function(){return function(){return Object(c.navigate)("/")}}}))(function(e){var t=e.onClickSiteTitle;return o.a.createElement(b.Location,null,function(e){var n=e.location.pathname;return o.a.createElement($.a,null,o.a.createElement(u.a,{position:"fixed"},o.a.createElement(d.a,null,o.a.createElement(ge,{variant:"h6",color:"inherit",noWrap:!0,title:"Home",onClick:t},"erfassen.ch"),o.a.createElement(we,null),o.a.createElement(be,{variant:"/"===n?"outlined":"text",component:c.Link,to:"/",active:("/"===n).toString()},"Home"),o.a.createElement(be,{variant:"/Projekte/"===n?"outlined":"text",component:c.Link,to:"/Projekte/",active:("/Projekte/"===n).toString()},"Projekte"),o.a.createElement(he,null))))})});t.a=function(e){var t=e.children;return o.a.createElement(c.StaticQuery,{query:"4130953669",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},o.a.createElement("html",{lang:"en"})),o.a.createElement(Ee,null),t)},data:r})}},366:function(e,t,n){"use strict";n(35);var r=n(0),a=n.n(r),o=n(88),i=n(309),s=n.n(i),c=(n(349),n(326),n(310)),l=n.n(c),u=n(9),p=n.n(u),d=(n(475),n(477)),m=n(677),f=n(330),h=n.n(f),g=(n(38),function(){if("undefined"==typeof window)return"https://erfassen.ch:5984/erfassen";var e="localhost"===window.location.hostname.replace("www.",""),t=e?"localhost":window.location.hostname;return e?"http://"+t+":5984/erfassen":"https://erfassen.ch:5984/erfassen"});d.a.plugin(m.a);var w=function(e){function t(t){var n;(n=e.call(this)||this).setAuthDb=function(e){n.setState(function(t){return{authDb:e}})},n.setName=function(e){n.setState(function(t){return{name:e}})},n.setSignupOpen=function(e){n.setState(function(t){return{signupOpen:e}})},n.setLoginOpen=function(e){n.setState(function(t){return{loginOpen:e}})},n.logIn=function(){var e=l()(s.a.mark(function e(t){var r,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,e.prev=1,e.next=4,n.state.authDb.logIn(r,a);case 4:o=e.sent,e.next=14;break;case 7:if(e.prev=7,e.t0=e.catch(1),"unauthorized"!==e.t0.name&&"forbidden"!==e.t0.name){e.next=13;break}throw new Error("Name oder Passwort stimmt nicht");case 13:throw e.t0;case 14:console.log("Login: logInResponce logging in:",o),n.setState(function(e){return{name:o.name,loginOpen:!1}});case 16:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),n.logOut=l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.state.authDb.logOut();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:n.setState(function(e){return{name:null,loginOpen:!1}});case 9:case"end":return e.stop()}},e,this,[[0,5]])}));var r=new d.a(g());return n.state={authDb:r,name:null,signupOpen:!1,loginOpen:!1},r.getSession().then(function(e){var t=h()(e,"userCtx.name",null);t&&n.setState(function(e){return{name:t}})}).catch(function(e){throw e}),n}return p()(t,e),t}(o.a);t.a=function(e){return function(t){return a.a.createElement(o.c,{to:[w]},function(n){return a.a.createElement(e,Object.assign({authState:n},t))})}}},428:function(e,t,n){"use strict";var r=n(309),a=n.n(r),o=(n(326),n(310)),i=n.n(o),s=n(0),c=n.n(s),l=n(410),u=n.n(l),p=n(421),d=n.n(p),m=n(427),f=n.n(m),h=n(417),g=n.n(h),w=n(423),b=n.n(w),E=n(425),y=n.n(E),v=n(422),x=n.n(v),S=n(424),k=n.n(S),C=n(382),P=n.n(C),O=n(426),_=n(327),D=n.n(_),I=n(84),T=n(314),j=n.n(T),q=n(319),N=n.n(q),B=n(369),A=n.n(B),L=n(307),H=n(366),z=Object(I.b)(u.a).withConfig({displayName:"Login__StyledDialog",componentId:"mq7maw-0"})([""]),F=I.b.div.withConfig({displayName:"Login__StyledDiv",componentId:"mq7maw-1"})(["display:flex;flex-direction:column;padding:0 24px;"]),K=Object(I.b)(g.a).withConfig({displayName:"Login__StyledInput",componentId:"mq7maw-2"})(["&:before{border-bottom-color:rgba(0,0,0,0.1) !important;}"]),M=j()(H.a,A()("email","setEmail",""),A()("password","setPassword",""),A()("showPass","setShowPass",!1),A()("emailErrorText","setEmailErrorText",""),A()("passwordErrorText","setPasswordErrorText",""),N()({close:function(e){var t=e.authState;return function(){return t.setLoginOpen(!1)}},onClickLogin:function(e){var t=e.email,n=e.password,r=e.authState;return i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.logIn({email:t,password:n});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}},e,this,[[0,5]])}))},onToggleShowPass:function(e){var t=e.showPass,n=e.setShowPass;return function(){n(!t)}}}),N()({onBlurEmail:function(e){var t=e.setEmail;return function(e){return t(e.target.value)}},onBlurPassword:function(e){var t=e.setPassword;return function(e){return t(e.target.value)}}}));t.a=M(function(e){var t=e.email,n=e.password,r=e.showPass,a=(e.setShowPass,e.emailErrorText),o=e.passwordErrorText,i=(e.setEmailErrorText,e.setPasswordErrorText,e.onBlurEmail),s=e.onBlurPassword,l=e.onClickLogin,u=e.close,p=e.onToggleShowPass,m=e.authState;return c.a.createElement(L.a,null,c.a.createElement(z,{"aria-labelledby":"login-dialog-title",open:m.state.loginOpen},c.a.createElement(d.a,{id:"login-dialog-title"},"Anmeldung"),c.a.createElement(F,null,c.a.createElement(x.a,{error:!!a,fullWidth:!0,"aria-describedby":"loginEmailHelper"},c.a.createElement(b.a,{htmlFor:"loginEmail"},"Email"),c.a.createElement(K,{id:"loginEmail",defaultValue:t,onBlur:i,autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&i(e)}}),c.a.createElement(k.a,{id:"loginEmailHelper"},a)),c.a.createElement(x.a,{error:!!o,fullWidth:!0,"aria-describedby":"loginPasswortHelper"},c.a.createElement(b.a,{htmlFor:"loginPasswort"},"Passwort"),c.a.createElement(K,{id:"loginPasswort",type:r?"text":"password",defaultValue:n,onBlur:s,onKeyPress:function(e){"Enter"===e.key&&s(e)},autoComplete:"current-password",autoCorrect:"off",spellCheck:"false",endAdornment:c.a.createElement(y.a,{position:"end"},c.a.createElement(P.a,{onClick:p,onMouseDown:function(e){return e.preventDefault()},title:r?"verstecken":"anzeigen"},r?c.a.createElement(O.b,null):c.a.createElement(O.a,null)))}),c.a.createElement(k.a,{id:"loginPasswortHelper"},o))),c.a.createElement(f.a,null,c.a.createElement(D.a,{onClick:u},"abbrechen"),c.a.createElement(D.a,{color:"primary",onClick:l},"Anmelden"))))})},448:function(e,t,n){"use strict";n(35);var r=n(0),a=n.n(r),o=n(88),i=(n(349),n(9)),s=n.n(i),c=n(309),l=n.n(c),u=(n(160),n(326),n(310)),p=n.n(u),d=n(447),m=n(554),f=n(449),h=n(555),g=n(556),w=n(557),b=n(558);d.a.plugin(m.a),d.a.plugin(f.a);var E=p()(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n={},e.prev=2,e.next=5,d.a.create({name:"erfassen",adapter:"idb"});case 5:n.erfassen=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0;case 11:return e.next=13,n.erfassen.collection({name:"message",schema:b});case 13:return e.next=15,n.erfassen.collection({name:"zeit",schema:h});case 15:return e.next=17,n.erfassen.collection({name:"ort",schema:g});case 17:return e.next=19,n.erfassen.ort.sync({remote:"http://localhost:5984/erfassen/",options:{live:!0,retry:!0},query:n.erfassen.ort.find().where("type").eq("ort")});case 19:return t.ort=e.sent,e.next=22,n.erfassen.collection({name:"beob",schema:w});case 22:return t.beob=n.erfassen.beob.sync({remote:"http://localhost:5984/erfassen/",options:{live:!0,retry:!0},query:n.erfassen.beob.find().where("type").eq("beob")}),e.abrupt("return",{dbs:n,syncs:t});case 24:case"end":return e.stop()}},e,this,[[2,8]])})),y=function(e){function t(t){var n;(n=e.call(this)||this).addDb=function(e){var t=e.name,r=e.db;console.log("RxDb, addDb",{name:t,db:r,dbs:n.state.dbs}),n.setState(function(e){var n,a=Object.assign({},e.dbs,((n={})[t]=r,n));return console.log("RxDb, addDb",{newDbs:a}),{dbs:a}})},n.addSync=function(e){var t=e.name,r=e.sync;n.setState(function(e){var n,a=Object.assign({},e.syncs,((n={})[t]=r,n));return{dbs:e.dbs,syncs:a}})};var r="undefined"==typeof window?null:window.dbs||null;return n.state={dbs:r,syncs:{}},("undefined"!=typeof window&&!window.dbs||"undefined"==typeof window)&&E().then(function(e){var t=e.dbs,r=e.syncs;n.setState(function(e){return{dbs:t,syncs:r}}),console.log({syncs:r}),"undefined"!=typeof window&&(window.dbs=t)}).catch(function(e){throw e}),n}return s()(t,e),t}(o.a);function v(e){return function(t){return a.a.createElement(o.c,{to:[y]},function(n){return a.a.createElement(e,Object.assign({rxDbState:n},t))})}}n.d(t,"a",function(){return v})},451:function(e){e.exports={data:{site:{siteMetadata:{title:"erfassen"}}}}},526:function(e,t){},543:function(e,t){},555:function(e){e.exports={title:"zeit schema",version:0,description:"describes a date",type:"object",properties:{type:{type:"string"},zeit:{type:"string",primary:!0}},required:["zeit","type"]}},556:function(e){e.exports={title:"ort schema",version:0,description:"describes a location",type:"object",properties:{type:{type:"string"},parentId:{type:"string"},name:{type:"string"}},required:["name","type"]}},557:function(e){e.exports={title:"beob schema",version:0,description:"describes a sighting",type:"object",properties:{type:{type:"string"},parentId:{type:"string"},art:{type:"string"}},required:["art","type"]}},558:function(e){e.exports={title:"message schema",version:0,description:"describes a message",type:"object",properties:{type:{type:"string"},message:{type:"string"}},required:["type"]}},559:function(e,t,n){n(38),e.exports=function(e){return"user_"+e.toLowerCase().replace("@","_at_").replace(".","_p_")}},560:function(e){e.exports={title:"user doc schema",version:0,description:"describes a user doc",type:"object",properties:{type:{type:"string"},name:{type:"string"},projects:{type:"array",items:{type:"string"}}},required:["name","type"]}}}]);
//# sourceMappingURL=2-7b36cadfb66f9b630844.js.map