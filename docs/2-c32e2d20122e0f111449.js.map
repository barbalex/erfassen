{"version":3,"sources":["webpack:///./src/components/ErrorBoundary.tsx","webpack:///./src/utils/createAndSyncUserCollection.ts","webpack:///./src/components/Header/Signup.tsx","webpack:///./src/components/Header/Account.tsx","webpack:///./src/components/Header/index.tsx","webpack:///./src/components/Layout.tsx","webpack:///./src/utils/couchUrl.ts","webpack:///./src/state/Auth.ts","webpack:///./src/state/withAuth.js","webpack:///./src/components/Header/Login.tsx","webpack:///./src/utils/createRxDb.ts","webpack:///./src/state/RxDb.ts","webpack:///./src/state/withRxDb.js","webpack:///./src/utils/userDbNameFromUserName.ts"],"names":["Container","styled","div","withConfig","displayName","componentId","ErrorTitle","ReloadButton","Button","ErrorBoundary","props","_this","_Component","call","this","state","error","errorInfo","componentDidCatch","setState","render","_this2","console","log","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","componentStack","variant","onClick","window","location","reload","children","React","Children","map","child","cloneElement","Object","assign","Component","rxdb","plugin","pouchdbAdapterIdb","createAndSyncUserCollection","_ref2","asyncToGenerator_default","regenerator_default","mark","_callee","_ref","rxDbState","email","_rxDbState$state","dbs","syncs","userDbName","userDb","isAlreadyBeingSynced","sync","wrap","_context","prev","next","userDbNameFromUserName","isRxDatabase","create","name","adapter","sent","collection","schema","userDocSchema","addDb","db","user","remote","options","live","retry","query","find","where","eq","addSync","stop","_x","apply","arguments","StyledDialog","Dialog","StyledDiv","StyledInput","Input","enhance","compose","withAuthState","withRxDbState","withState","withHandlers","close","authState","setSignupOpen","onClickSignup","password","authDb","signUp","t0","logIn","t1","onToggleShowPass","_ref4","showPass","setShowPass","onBlurEmail","_ref5","setEmail","event","target","value","onBlurPassword","_ref6","setPassword","_ref7","emailErrorText","passwordErrorText","setEmailErrorText","setPasswordErrorText","react_default","aria-labelledby","open","signupOpen","DialogTitle_default","id","FormControl_default","fullWidth","aria-describedby","InputLabel_default","htmlFor","defaultValue","onBlur","autoFocus","onKeyPress","e","key","FormHelperText_default","type","autoComplete","autoCorrect","spellCheck","endAdornment","InputAdornment_default","position","IconButton_default","onMouseDown","preventDefault","title","md","DialogActions_default","Button_default","color","IconContainer","UserNameDiv","onClickMenu","setAnchorEl","currentTarget","onCloseMenu","_ref3","onClickLogin","setLoginOpen","loginOpen","onClickLogout","logOut","anchorEl","_authState$state","Fragment","aria-haspopup","aria-label","fa","Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","onClose","MenuItem_default","Header_Signup","Login","SiteTitle","Typography","Spacer","NavButton","active","onClickSiteTitle","navigate","es","pathname","AppBar_default","Toolbar_default","noWrap","component","Link","to","toString","Header_Account","Layout","gatsby_browser_entry","data","Helmet_default","site","siteMetadata","meta","content","lang","components_Header","_4130953669","couchUrl","isLocalhost","hostname","replace","PouchDB","pouchdbAuthentication","AuthContainer","_Container","setAuthDb","setName","logInResponce","Error","_callee2","_context2","getSession","then","resp","get","catch","__webpack_exports__","WrappedComponent","unstated_es","AuthState","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","_ErrorBoundary__WEBPACK_IMPORTED_MODULE_19__","_material_ui_core_DialogTitle__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8___default","_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_12___default","react_icons_md__WEBPACK_IMPORTED_MODULE_13__","_material_ui_core_DialogActions__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default","pouchdbAdapterHttp","createRxDb","erfassen","messageSchema","zeitSchema","ortSchema","ort","beobSchema","beob","abrupt","RxDbContainer","_Object$assign","newDbs","_Object$assign2","newSyncs","RxDbState","module","exports","toLowerCase"],"mappings":"oKAKMA,EAAYC,IAAOC,IAAVC,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAGJ,CAAH,kBAGTK,EAAaL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,4BAAAC,YAAA,gBAAGJ,CAAH,yBAGVM,EAAeN,YAAOO,KAAVL,WAAA,CAAAC,YAAA,8BAAAC,YAAA,gBAAGJ,CAAH,iCAUZQ,cACJ,SAAAA,EAAYC,GAAc,IAAAC,EAAA,OACxBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MACKC,MAAQ,CAAEC,MAAO,KAAMC,UAAW,MAFfN,sCAK1BO,2BAAkBF,EAAcC,GAE9BH,KAAKK,SAAS,CACZH,MAAOA,EACPC,UAAWA,OAIfG,kBAAS,IAAAC,EAAAP,KACCG,EAAcH,KAAKC,MAAnBE,UACR,GAAIA,EAEF,OADAK,QAAQC,IAAI,aAAcN,GAExBO,EAAAC,EAAAC,cAAC1B,EAAD,KACEwB,EAAAC,EAAAC,cAACpB,EAAD,uDAGAkB,EAAAC,EAAAC,cAAA,WAAMT,EAAUU,gBAChBH,EAAAC,EAAAC,cAACnB,EAAD,CACEqB,QAAQ,WACRC,QAAS,WACW,oBAAXC,QAA0BA,OAAOC,SAASC,QAAO,KAH5D,cAVC,IAqBCC,EAAanB,KAAKJ,MAAlBuB,SAOR,OANwBC,IAAMC,SAASC,IAAIH,EAAU,SAAAI,GAAK,OACxDH,IAAMI,aAAaD,EAAnBE,OAAAC,OAAA,GAA+BnB,EAAKX,cArCA+B,aA8C3BhC,omBChEfiC,KAAKC,OAAOC,MAMZ,IAAAC,GAAA,eAAAC,EAAAC,IAAAC,EAAAvB,EAAAwB,KAAe,SAAAC,EAAAC,GAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAZ,EAAAvB,EAAAoC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACbZ,EADaD,EACbC,UACAC,EAFaF,EAEbE,MAFaC,EAOUF,EAAUrC,MAAzBwC,EAPKD,EAOLC,IAAKC,EAPAF,EAOAE,MAGPC,EAAaQ,KAAuBZ,GAC1C/B,QAAQC,IAAI,+BAAgC,CAAEgC,MAAKC,QAAOJ,cAErDV,KAAKwB,aAAaX,EAAIE,IAbd,CAAAK,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EAcItB,KAAKyB,OAAO,CACzBC,KAAMX,EACNY,QAAS,QAhBA,cAcXX,EAdWI,EAAAQ,KAAAR,EAAAE,KAAA,GAkBLN,EAAOa,WAAW,CACtBH,KAAM,OACNI,OAAQC,KApBC,QAwBbrB,EAAUsB,MAAM,CAAEN,KAAMX,EAAYkB,GAAIjB,IAClCC,IAAkCH,KAAWA,EAAMC,GACzDnC,QAAQC,IAAI,+BAAgC,CAAEgC,QAEzCI,IACHC,EAAOF,EAAOkB,KAAKhB,KAAK,CACtBiB,OAAM,yBAA2BpB,EAA3B,IACNqB,QAAS,CACPC,MAAM,EACNC,OAAO,GAETC,MAAOvB,EAAOkB,KACXM,OACAC,MAAM,QACNC,GAAG,WAGVhC,EAAUiC,QAAQ,CAAEjB,KAAMX,EAAYG,SACtCtC,QAAQC,IAAI,SAAU,CAAEgC,MAAKE,eA1ChB,yBAAAK,EAAAwB,SAAApC,EAAApC,SAAf,gBAAAyE,GAAA,OAAAzC,EAAA0C,MAAA1E,KAAA2E,YAAA,GCkBMC,GAAezF,YAAO0F,KAAVxF,WAAA,CAAAC,YAAA,uBAAAC,YAAA,gBAAGJ,CAAH,MACZ2F,GAAY3F,IAAOC,IAAVC,WAAA,CAAAC,YAAA,oBAAAC,YAAA,gBAAGJ,CAAH,wDAKT4F,GAAc5F,YAAO6F,KAAV3F,WAAA,CAAAC,YAAA,sBAAAC,YAAA,gBAAGJ,CAAH,+DA4KF8F,GAtKCC,IACdC,KACAC,KACAC,IAAU,QAAS,WAAY,IAC/BA,IAAU,WAAY,cAAe,IACrCA,IAAU,WAAY,eAAe,GACrCA,IAAU,iBAAkB,oBAAqB,IACjDA,IAAU,oBAAqB,uBAAwB,IACvDC,IAAuB,CACrBC,MAAO,SAAAlD,GAAA,IAAGmD,EAAHnD,EAAGmD,UAAH,OAAkD,kBACvDA,EAAUC,eAAc,KAC1BC,cAAe,SAAA1D,GAAA,IACbO,EADaP,EACbO,MACAoD,EAFa3D,EAEb2D,SACAH,EAHaxD,EAGbwD,UACAlD,EAJaN,EAIbM,UAJa,OAAAL,GAAA,CAAAC,EAAAvB,EAAAwB,KAUT,SAAAC,IAAA,OAAAF,EAAAvB,EAAAoC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEIsC,EAAUvF,MAAM2F,OAAOC,OAAOtD,EAAOoD,GAFzC,OAAA3C,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAA8C,GAAA9C,EAAA,SAIFxC,QAAQC,IAAI,4BAAZuC,EAAA8C,IAJE,cAAA9C,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAQIsC,EAAUO,MAAM,CAAExD,QAAOoD,aAR7B,QAAA3C,EAAAE,KAAA,uBAAAF,EAAAC,KAAA,GAAAD,EAAAgD,GAAAhD,EAAA,SAAAA,EAAAgD,GAAA,QAYJjE,GAA4B,CAAEO,YAAWC,UAZrC,yBAAAS,EAAAwB,SAAApC,EAAApC,KAAA,oBAcNiG,iBAAkB,SAAAC,GAAA,IAChBC,EADgBD,EAChBC,SACAC,EAFgBF,EAEhBE,YAFgB,OAMZ,WACJA,GAAaD,OAGjBb,IAAuB,CACrBe,YAAa,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,SAAH,OAAyD,SACpEC,GADoE,OAEjED,EAASC,EAAMC,OAAOC,SAC3BC,eAAgB,SAAAC,GAAA,IACdC,EADcD,EACdC,YADc,OAIV,SAACL,GAAD,OAAkBK,EAAYL,EAAMC,OAAOC,WAiHtCzB,CA7GA,SAAA6B,GAAA,IACbvE,EADauE,EACbvE,MACAoD,EAFamB,EAEbnB,SACAQ,EAHaW,EAGbX,SAEAY,GALaD,EAIbV,YAJaU,EAKbC,gBACAC,EANaF,EAMbE,kBAGAX,GATaS,EAObG,kBAPaH,EAQbI,qBARaJ,EASbT,aACAM,EAVaG,EAUbH,eACAjB,EAXaoB,EAWbpB,cAEAH,GAbauB,EAYbhD,KAZagD,EAabvB,OACAU,EAdaa,EAcbb,iBAEAT,GAhBasB,EAebjD,GAfaiD,EAgBbtB,WAhBa,OAqCb2B,EAAAxG,EAAAC,cAACjB,EAAA,EAAD,KACEwH,EAAAxG,EAAAC,cAACgE,GAAD,CACEwC,kBAAgB,eAChBC,KAAM7B,EAAUvF,MAAMqH,YAEtBH,EAAAxG,EAAAC,cAAC2G,EAAA5G,EAAD,CAAa6G,GAAG,gBAAhB,eACAL,EAAAxG,EAAAC,cAACkE,GAAD,KACEqC,EAAAxG,EAAAC,cAAC6G,EAAA9G,EAAD,CACET,QAAS6G,EACTW,WAAS,EACTC,mBAAiB,eAEjBR,EAAAxG,EAAAC,cAACgH,EAAAjH,EAAD,CAAYkH,QAAQ,SAApB,SACAV,EAAAxG,EAAAC,cAACmE,GAAD,CACEyC,GAAG,QACHM,aAAcvF,EACdwF,OAAQ1B,EACR2B,WAAS,EACTC,WAAY,SAAAC,GACI,UAAVA,EAAEC,KACJ9B,OAINc,EAAAxG,EAAAC,cAACwH,EAAAzH,EAAD,CAAgB6G,GAAG,eAAeT,IAEpCI,EAAAxG,EAAAC,cAAC6G,EAAA9G,EAAD,CACET,QAAS8G,EACTU,WAAS,EACTC,mBAAiB,kBAEjBR,EAAAxG,EAAAC,cAACgH,EAAAjH,EAAD,CAAYkH,QAAQ,YAApB,YACAV,EAAAxG,EAAAC,cAACmE,GAAD,CACEyC,GAAG,WACHa,KAAMlC,EAAW,OAAS,WAC1B2B,aAAcnC,EACdoC,OAAQpB,EACRsB,WAAY,SAAAC,GACI,UAAVA,EAAEC,KACJxB,KAGJ2B,aAAa,mBACbC,YAAY,MACZC,WAAW,QACXC,aACEtB,EAAAxG,EAAAC,cAAC8H,EAAA/H,EAAD,CAAgBgI,SAAS,OACvBxB,EAAAxG,EAAAC,cAACgI,EAAAjI,EAAD,CACEI,QAASkF,EACT4C,YAAa,SAAAX,GAAC,OAAIA,EAAEY,kBACpBC,MAAO5C,EAAW,aAAe,YAEhCA,EAAWgB,EAAAxG,EAAAC,cAACoI,EAAA,EAAD,MAAsB7B,EAAAxG,EAAAC,cAACoI,EAAA,EAAD,UAK1C7B,EAAAxG,EAAAC,cAACwH,EAAAzH,EAAD,CAAgB6G,GAAG,kBAChBR,KAIPG,EAAAxG,EAAAC,cAACqI,EAAAtI,EAAD,KACEwG,EAAAxG,EAAAC,cAACsI,EAAAvI,EAAD,CAAQI,QAASwE,GAAjB,aACA4B,EAAAxG,EAAAC,cAACsI,EAAAvI,EAAD,CAAQwI,MAAM,UAAUpI,QAAS2E,GAAjC,kCCrLF0D,GAAgBjK,IAAOC,IAAVC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,YAAGJ,CAAH,0CAIbkK,GAAclK,IAAOC,IAAVC,WAAA,CAAAC,YAAA,uBAAAC,YAAA,YAAGJ,CAAH,2JA0HF8F,GAlGCC,IACdC,KACAE,IAAU,WAAY,cAAe,MACrCC,IAAuB,CACrBgE,YAAa,SAAAjH,GAAA,IACXkH,EADWlH,EACXkH,YADW,OAIP,SAAC/C,GAAD,OAAkB+C,EAAY/C,EAAMgD,iBAC1CC,YAAa,SAAAzH,GAAA,IACXuH,EADWvH,EACXuH,YADW,OAIP,kBAAMA,EAAY,QACxB7D,cAAe,SAAAgE,GAAA,IACbH,EADaG,EACbH,YACA/D,EAFakE,EAEblE,UAFa,OAMT,WACJ+D,EAAY,MACZ/D,EAAUC,eAAeD,EAAUvF,MAAMqH,cAE3CqC,aAAc,SAAAzD,GAAA,IACZqD,EADYrD,EACZqD,YACA/D,EAFYU,EAEZV,UAFY,OAMR,WACJ+D,EAAY,MACZ/D,EAAUoE,cAAcpE,EAAUvF,MAAM4J,aAE1CC,cAAe,SAAAxD,GAAA,IACbiD,EADajD,EACbiD,YACA/D,EAFac,EAEbd,UAFa,OAMT,WACJ+D,EAAY,MACZ/D,EAAUuE,aAwDD9E,CAnDmB,SAAA2B,GAQ5B,IAPJoD,EAOIpD,EAPJoD,SACAP,EAMI7C,EANJ6C,YACAH,EAKI1C,EALJ0C,YACA5D,EAIIkB,EAJJlB,cACAoE,EAGIlD,EAHJkD,cACAH,EAEI/C,EAFJ+C,aAEIM,EAAArD,EADJpB,UAEkDvF,MAA1CqD,EADJ2G,EACI3G,KAAMgE,EADV2C,EACU3C,WAAYuC,EADtBI,EACsBJ,UAE1B,OACE1C,EAAAxG,EAAAC,cAACjB,EAAA,EAAD,KACEwH,EAAAxG,EAAAC,cAAAuG,EAAAxG,EAAAuJ,SAAA,KACE/C,EAAAxG,EAAAC,cAACwI,GAAD,KACEjC,EAAAxG,EAAAC,cAACgI,EAAAjI,EAAD,CACEwJ,gBAAc,OACdC,aAAW,QACXrJ,QAASuI,EACTH,MAAM,UACNJ,MAAM,SAEN5B,EAAAxG,EAAAC,cAACyJ,EAAA,EAAD,OAEFlD,EAAAxG,EAAAC,cAACyI,GAAD,KAAc/F,GAAQ,KAExB6D,EAAAxG,EAAAC,cAAC0J,EAAA3J,EAAD,CACE6G,GAAG,cACHwC,SAAUA,EACVO,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdpD,OAAQ2C,EACRW,QAASlB,IAEPnG,GAAQ6D,EAAAxG,EAAAC,cAACgK,EAAAjK,EAAD,CAAUI,QAAS4I,GAAnB,YACTrG,GAAQ6D,EAAAxG,EAAAC,cAACgK,EAAAjK,EAAD,CAAUI,QAAS+I,GAAnB,YACT3C,EAAAxG,EAAAC,cAACgK,EAAAjK,EAAD,CAAUI,QAAS2E,GAAnB,oBAED4B,GAAcH,EAAAxG,EAAAC,cAACiK,GAAD,MACdhB,GAAa1C,EAAAxG,EAAAC,cAACkK,GAAA,EAAD,UC1HhBC,GAAY5L,YAAO6L,KAAV3L,WAAA,CAAAC,YAAA,oBAAAC,YAAA,gBAAGJ,CAAH,0EAOT8L,GAAS9L,IAAOC,IAAVC,WAAA,CAAAC,YAAA,iBAAAC,YAAA,gBAAGJ,CAAH,kBAMN+L,GAAY/L,YAA4BO,KAA/BL,WAAA,CAAAC,YAAA,oBAAAC,YAAA,gBAAGJ,CAAH,qGAEH,SAAAS,GAAK,OAAKA,EAAMuL,OAAS,YAAc,SAElC,SAAAvL,GAAK,OAAKA,EAAMuL,OAAS,MAAQ,QAuDnClG,GApDCC,IACdI,IAAa,CAAE8F,iBAAkB,kBAAM,kBAAMC,mBAAS,SAmDzCpG,CA5CkB,SAAA5C,GAAA,IAAG+I,EAAH/I,EAAG+I,iBAAH,OAC/BjE,EAAAxG,EAAAC,cAAC0K,EAAA,SAAD,KACG,SAAAtJ,GAAkB,IACTuJ,EADSvJ,EAAff,SACMsK,SAER,OACEpE,EAAAxG,EAAAC,cAACjB,EAAA,EAAD,KACEwH,EAAAxG,EAAAC,cAAC4K,EAAA7K,EAAD,CAAQgI,SAAS,SACfxB,EAAAxG,EAAAC,cAAC6K,EAAA9K,EAAD,KACEwG,EAAAxG,EAAAC,cAACmK,GAAD,CACEjK,QAAQ,KACRqI,MAAM,UACNuC,QAAM,EACN3C,MAAM,OACNhI,QAASqK,GALX,eASAjE,EAAAxG,EAAAC,cAACqK,GAAD,MACA9D,EAAAxG,EAAAC,cAACsK,GAAD,CACEpK,QAAsB,MAAbyK,EAAmB,WAAa,OACzCI,UAAWC,OACXC,GAAG,IACHV,QAAsB,MAAbI,GAAkBO,YAJ7B,QAQA3E,EAAAxG,EAAAC,cAACsK,GAAD,CACEpK,QAAsB,eAAbyK,EAA4B,WAAa,OAClDI,UAAWC,OACXC,GAAG,aACHV,QAAsB,eAAbI,GAA2BO,YAJtC,YAQA3E,EAAAxG,EAAAC,cAACmL,GAAD,aCnCCC,IArBe,SAAA3J,GAAA,IAAGlB,EAAHkB,EAAGlB,SAAH,OAC5BgG,EAAAxG,EAAAC,cAACqL,EAAA,YAAD,CACE9H,MAZO,aAaP7D,OAAQ,SAAA4L,GAAI,OACV/E,EAAAxG,EAAAC,cAAAuG,EAAAxG,EAAAuJ,SAAA,KACE/C,EAAAxG,EAAAC,cAACuL,EAAAxL,EAAD,CACEoI,MAAOmD,EAAKE,KAAKC,aAAatD,MAC9BuD,KAAM,CACJ,CAAEhJ,KAAM,cAAeiJ,QAAS,UAChC,CAAEjJ,KAAM,WAAYiJ,QAAS,uBAG/BpF,EAAAxG,EAAAC,cAAA,QAAM4L,KAAK,QAEbrF,EAAAxG,EAAAC,cAAC6L,GAAD,MACCtL,IAdP+K,KAAAQ,0LCrBaC,SAAA,WACb,GAAsB,oBAAX3L,OACT,MAAO,oCAET,IAIM4L,EAA8C,cAJjB5L,OAAOC,SAAS4L,SAASC,QAC1D,OACA,IAGID,EAAWD,EAAc,YAAc5L,OAAOC,SAAS4L,SAK7D,OAJyBD,EAAW,UACtBC,EADsB,uDCItCE,IAAQlL,OAAOmL,SAuBMC,cACnB,SAAAA,EAAYrN,GAAmB,IAAAC,GAC7BA,EAAAqN,EAAAnN,KAAAC,aAsBFmN,UAAY,SAACvH,GACX/F,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAE2F,aAxBG/F,EA2B/BuN,QAAU,SAAC9J,GACTzD,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAEqD,WA5BGzD,EA+B/B4F,cAAgB,SAAC6B,GACfzH,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAEqH,iBAhCGzH,EAmC/B+J,aAAe,SAACC,GACdhK,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAE4J,gBApCGhK,EAuC/BkG,MAvC+B,eAAA/D,EAAAC,IAAAC,EAAAvB,EAAAwB,KAuCvB,SAAAC,EAAAC,GAAA,IAAAE,EAAAoD,EAAA0H,EAAA,OAAAnL,EAAAvB,EAAAoC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAASX,EAATF,EAASE,MAAOoD,EAAhBtD,EAAgBsD,SAAhB3C,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGkBrD,EAAKI,MAAM2F,OAAOG,MAAMxD,EAAOoD,GAHjD,OAGJ0H,EAHIrK,EAAAQ,KAAAR,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAA8C,GAAA9C,EAAA,SAKe,iBAAfA,EAAA8C,GAAMxC,MAA0C,cAAfN,EAAA8C,GAAMxC,KALvC,CAAAN,EAAAE,KAAA,eAOI,IAAIoK,MAAM,mCAPd,cAAAtK,EAAA8C,GAAA,QAaNtF,QAAQC,IAAI,mCAAoC4M,GAChDxN,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAEqD,KAAM+J,EAAc/J,KAAMuG,WAAW,KAdzD,yBAAA7G,EAAAwB,SAAApC,EAAApC,KAAA,YAvCuB,gBAAAyE,GAAA,OAAAzC,EAAA0C,MAAA1E,KAAA2E,YAAA,GAAA9E,EAwD/BkK,OAxD+B9H,IAAAC,EAAAvB,EAAAwB,KAwDtB,SAAAoL,IAAA,OAAArL,EAAAvB,EAAAoC,KAAA,SAAAyK,GAAA,cAAAA,EAAAvK,KAAAuK,EAAAtK,MAAA,cAAAsK,EAAAvK,KAAA,EAAAuK,EAAAtK,KAAA,EAECrD,EAAKI,MAAM2F,OAAOmE,SAFnB,OAAAyD,EAAAtK,KAAA,qBAAAsK,EAAAvK,KAAA,EAAAuK,EAAA1H,GAAA0H,EAAA,SAAAA,EAAA1H,GAAA,OAMPjG,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAEqD,KAAM,KAAMuG,WAAW,KAN1C,wBAAA2D,EAAAhJ,SAAA+I,EAAAvN,KAAA,YAtDP,IAAM4F,EAAS,IAAImH,IAAQJ,KAFE,OAG7B9M,EAAKI,MAAQ,CACX2F,SACAtC,KAAM,KACNgE,YAAY,EACZuC,WAAW,GAGbjE,EACG6H,aACAC,KAAK,SAACC,GACL,IAAMrK,EAAOsK,IAAID,EAAM,eAAgB,MACnCrK,GACFzD,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAEqD,YAG7BuK,MAAM,SAAC3N,GACN,MAAMA,IAnBmBL,qBADUX,KC5B5B4O,EAAA,WAAAC,GAAgB,OAAI,SAAAnO,GAAK,OACtCuH,EAAAxG,EAAAC,cAACoN,EAAA,EAAD,CAAWnC,GAAI,CAACoC,IACb,SAAAvH,GAAK,OAAIS,EAAAxG,EAAAC,cAACmN,EAADtM,OAAAC,OAAA,CAAkB8D,UAAWkB,GAAW9G,wXCUhDgF,EAAezF,YAAO0F,KAAVxF,WAAA,CAAAC,YAAA,sBAAAC,YAAA,YAAGJ,CAAH,MACZ2F,EAAY3F,IAAOC,IAAVC,WAAA,CAAAC,YAAA,mBAAAC,YAAA,YAAGJ,CAAH,wDAKT4F,EAAc5F,YAAO6F,KAAV3F,WAAA,CAAAC,YAAA,qBAAAC,YAAA,YAAGJ,CAAH,+DAMX8F,EAAUC,IACdC,IACAE,IAAU,QAAS,WAAY,IAC/BA,IAAU,WAAY,cAAe,IACrCA,IAAU,WAAY,eAAe,GACrCA,IAAU,iBAAkB,oBAAqB,IACjDA,IAAU,oBAAqB,uBAAwB,IACvDC,IAAuB,CACrBC,MAAO,SAAAlD,GAAA,IAAGmD,EAAHnD,EAAGmD,UAAH,OAAkD,kBACvDA,EAAUoE,cAAa,KACzBD,aAAc,SAAA3H,GAAA,IACZO,EADYP,EACZO,MACAoD,EAFY3D,EAEZ2D,SACAH,EAHYxD,EAGZwD,UAHY,OAAA0I,GAAA,CAAAC,EAAAxN,EAAAwB,KAQR,SAAAC,IAAA,OAAA+L,EAAAxN,EAAAoC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEIsC,EAAUO,MAAM,CAAExD,QAAOoD,aAF7B,OAAA3C,EAAAE,KAAA,qBAAAF,EAAAC,KAAA,EAAAD,EAAA8C,GAAA9C,EAAA,SAAAA,EAAA8C,GAAA,wBAAA9C,EAAAwB,SAAApC,EAAApC,KAAA,aAONiG,iBAAkB,SAAAC,GAAA,IAChBC,EADgBD,EAChBC,SACAC,EAFgBF,EAEhBE,YAFgB,OAMZ,WACJA,GAAaD,OAGjBb,IAAuB,CACrBe,YAAa,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,SAAH,OAAyD,SACpEC,GADoE,OAEjED,EAASC,EAAMC,OAAOC,SAC3BC,eAAgB,SAAAC,GAAA,IACdC,EADcD,EACdC,YADc,OAIV,SAACL,GAAD,OAAkBK,EAAYL,EAAMC,OAAOC,YA+GtCzB,MA3GD,SAAA6B,GAAA,IACZvE,EADYuE,EACZvE,MACAoD,EAFYmB,EAEZnB,SACAQ,EAHYW,EAGZX,SAEAY,GALYD,EAIZV,YAJYU,EAKZC,gBACAC,EANYF,EAMZE,kBAGAX,GATYS,EAOZG,kBAPYH,EAQZI,qBARYJ,EASZT,aACAM,EAVYG,EAUZH,eACAgD,EAXY7C,EAWZ6C,aACApE,EAZYuB,EAYZvB,MACAU,EAbYa,EAaZb,iBACAT,EAdYsB,EAcZtB,UAdY,OAiCZ9E,EAAAC,EAAAC,cAACwN,EAAA,EAAD,KACE1N,EAAAC,EAAAC,cAACgE,EAAD,CACEwC,kBAAgB,qBAChBC,KAAM7B,EAAUvF,MAAM4J,WAEtBnJ,EAAAC,EAAAC,cAACyN,EAAA1N,EAAD,CAAa6G,GAAG,sBAAhB,aACA9G,EAAAC,EAAAC,cAACkE,EAAD,KACEpE,EAAAC,EAAAC,cAAC0N,EAAA3N,EAAD,CACET,QAAS6G,EACTW,WAAS,EACTC,mBAAiB,oBAEjBjH,EAAAC,EAAAC,cAAC2N,EAAA5N,EAAD,CAAYkH,QAAQ,cAApB,SACAnH,EAAAC,EAAAC,cAACmE,EAAD,CACEyC,GAAG,aACHM,aAAcvF,EACdwF,OAAQ1B,EACR2B,WAAS,EACTC,WAAY,SAAAC,GACI,UAAVA,EAAEC,KACJ9B,EAAY6B,MAIlBxH,EAAAC,EAAAC,cAAC4N,EAAA7N,EAAD,CAAgB6G,GAAG,oBAChBT,IAGLrG,EAAAC,EAAAC,cAAC0N,EAAA3N,EAAD,CACET,QAAS8G,EACTU,WAAS,EACTC,mBAAiB,uBAEjBjH,EAAAC,EAAAC,cAAC2N,EAAA5N,EAAD,CAAYkH,QAAQ,iBAApB,YACAnH,EAAAC,EAAAC,cAACmE,EAAD,CACEyC,GAAG,gBACHa,KAAMlC,EAAW,OAAS,WAC1B2B,aAAcnC,EACdoC,OAAQpB,EACRsB,WAAY,SAAAC,GACI,UAAVA,EAAEC,KACJxB,EAAeuB,IAGnBI,aAAa,mBACbC,YAAY,MACZC,WAAW,QACXC,aACE/H,EAAAC,EAAAC,cAAC6N,EAAA9N,EAAD,CAAgBgI,SAAS,OACvBjI,EAAAC,EAAAC,cAAC8N,EAAA/N,EAAD,CACEI,QAASkF,EACT4C,YAAa,SAAAX,GAAC,OAAIA,EAAEY,kBACpBC,MAAO5C,EAAW,aAAe,YAEhCA,EAAWzF,EAAAC,EAAAC,cAAC+N,EAAA,EAAD,MAAsBjO,EAAAC,EAAAC,cAAC+N,EAAA,EAAD,UAK1CjO,EAAAC,EAAAC,cAAC4N,EAAA7N,EAAD,CAAgB6G,GAAG,uBAChBR,KAIPtG,EAAAC,EAAAC,cAACgO,EAAAjO,EAAD,KACED,EAAAC,EAAAC,cAACiO,EAAAlO,EAAD,CAAQI,QAASwE,GAAjB,aACA7E,EAAAC,EAAAC,cAACiO,EAAAlO,EAAD,CAAQwI,MAAM,UAAUpI,QAAS4I,GAAjC,iOC1KR/H,IAAKC,OAAOiN,KACZlN,IAAKC,OAAOC,KAEZ,IAAAiN,EAAA9M,GAAA,CAAAC,EAAAvB,EAAAwB,KAAe,SAAAC,IAAA,IAAAM,EAAAD,EAAA,OAAAP,EAAAvB,EAAAoC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAMTR,EAAa,GACbD,EAAM,GAPGO,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EASUtB,IAAKyB,OAAO,CAC/BC,KAAM,WACNC,QAAS,QAXA,OASXd,EAAIuM,SATOhM,EAAAQ,KAAAR,EAAAE,KAAA,sBAAAF,EAAAC,KAAA,EAAAD,EAAA8C,GAAA9C,EAAA,SAAAA,EAAA8C,GAAA,eAAA9C,EAAAE,KAAA,GAmBPT,EAAIuM,SAASvL,WAAW,CAC5BH,KAAM,UACNI,OAAQuL,IArBG,eAAAjM,EAAAE,KAAA,GAuBPT,EAAIuM,SAASvL,WAAW,CAC5BH,KAAM,OACNI,OAAQwL,IAzBG,eAAAlM,EAAAE,KAAA,GA2BPT,EAAIuM,SAASvL,WAAW,CAC5BH,KAAM,MACNI,OAAQyL,IA7BG,eAAAnM,EAAAE,KAAA,GAqCKT,EAAIuM,SAASI,IAAItM,KAAK,CACtCiB,OAAQ,kCACRC,QAAS,CACPC,MAAM,EACNC,OAAO,GAETC,MAAO1B,EAAIuM,SAASI,IACjBhL,OACAC,MAAM,QACNC,GAAG,SA9CK,eAqCb5B,EAAM0M,IArCOpM,EAAAQ,KAAAR,EAAAE,KAAA,GAgDPT,EAAIuM,SAASvL,WAAW,CAC5BH,KAAM,OACNI,OAAQ2L,IAlDG,eAoDb3M,EAAM4M,KAAO7M,EAAIuM,SAASM,KAAKxM,KAAK,CAClCiB,OAAQ,kCACRC,QAAS,CACPC,MAAM,EACNC,OAAO,GAETC,MAAO1B,EAAIuM,SAASM,KACjBlL,OACAC,MAAM,QACNC,GAAG,UA7DKtB,EAAAuM,OAAA,SAgEN,CAAE9M,MAAKC,UAhED,yBAAAM,EAAAwB,SAAApC,EAAApC,KAAA,YCYMwP,cACnB,SAAAA,EAAY5P,GAAmB,IAAAC,GAC7BA,EAAAqN,EAAAnN,KAAAC,aAwBF4D,MAAQ,SAAAvB,GAA6C,IAA1CiB,EAA0CjB,EAA1CiB,KAAMO,EAAoCxB,EAApCwB,GACfrD,QAAQC,IAAI,cAAe,CAAE6C,OAAMO,KAAIpB,IAAK5C,EAAKI,MAAMwC,MACvD5C,EAAKQ,SAAS,SAAAJ,GAAS,IAAAwP,EACfC,EAAMjO,OAAAC,OAAA,GACPzB,EAAMwC,MADCgN,EAAA,IAETnM,GAAOO,EAFE4L,IAKZ,OADAjP,QAAQC,IAAI,cAAe,CAAEiP,WACtB,CACLjN,IAAKiN,MAlCoB7P,EAwC/B0E,QAAU,SAAAvC,GAAiD,IAA9CsB,EAA8CtB,EAA9CsB,KAAMR,EAAwCd,EAAxCc,KACjBjD,EAAKQ,SAAS,SAAAJ,GAAS,IAAA0P,EACfC,EAAQnO,OAAAC,OAAA,GACTzB,EAAMyC,QADGiN,EAAA,IAEXrM,GAAOR,EAFI6M,IAId,MAAO,CACLlN,IAAKxC,EAAMwC,IACXC,MAAOkN,MA9CX,IAAMnN,EAAwB,oBAAXzB,OAAyB,KAAOA,OAAOyB,KAAO,KAFpC,OAG7B5C,EAAKI,MAAQ,CACXwC,MACAC,MAAO,KAIY,oBAAX1B,SAA2BA,OAAOyB,KACxB,oBAAXzB,SAGP+N,IACGrB,KAAK,SAAAhE,GAAoB,IAAjBjH,EAAiBiH,EAAjBjH,IAAKC,EAAYgH,EAAZhH,MACZ7C,EAAKQ,SAAS,SAAAJ,GAAK,MAAK,CAAEwC,MAAKC,WAC/BlC,QAAQC,IAAI,CAAEiC,UACQ,oBAAX1B,SAAwBA,OAAOyB,IAAMA,KAEjDoL,MAAM,SAAA3N,GACL,MAAMA,IApBiBL,qBADUX,KCf5B,SAASkG,EAAc2I,GACpC,OAAO,SAAAnO,GAAK,OACVuH,EAAAxG,EAAAC,cAACoN,EAAA,EAAD,CAAWnC,GAAI,CAACgE,IACb,SAAAnJ,GAAK,OAAIS,EAAAxG,EAAAC,cAACmN,EAADtM,OAAAC,OAAA,CAAkBY,UAAWoE,GAAW9G,y9BCbxDkQ,EAAOC,QAAU,SAACzM,GAAD,MACf,QACAA,EACG0M,cACAlD,QAAQ,IAAK,QACbA,QAAQ,IAAK","file":"2-c32e2d20122e0f111449.js","sourcesContent":["// @flow\nimport React, { Component } from 'react'\nimport styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\n\nconst Container = styled.div`\n  margin: 10px;\n`\nconst ErrorTitle = styled.div`\n  margin-bottom: 10px;\n`\nconst ReloadButton = styled(Button)`\n  margin-top: 10px !important;\n`\n\ninterface Props {}\ninterface State {\n  error: Error\n  errorInfo: any\n}\n\nclass ErrorBoundary<Props, State> extends Component {\n  constructor(props: Props) {\n    super(props)\n    this.state = { error: null, errorInfo: null }\n  }\n\n  componentDidCatch(error: Error, errorInfo: any) {\n    // Catch errors in any components below and re-render with error message\n    this.setState({\n      error: error,\n      errorInfo: errorInfo,\n    })\n  }\n\n  render() {\n    const { errorInfo } = this.state\n    if (errorInfo) {\n      console.log('errorInfo:', errorInfo)\n      return (\n        <Container>\n          <ErrorTitle>\n            Oh je, es ist ein Fehler aufgetreten! Bericht:\n          </ErrorTitle>\n          <div>{errorInfo.componentStack}</div>\n          <ReloadButton\n            variant=\"outlined\"\n            onClick={() => {\n              typeof window !== 'undefined' && window.location.reload(false)\n            }}\n          >\n            Neu laden\n          </ReloadButton>\n        </Container>\n      )\n    }\n    const { children } = this.props\n    var childrenWithProps = React.Children.map(children, child =>\n      React.cloneElement(child, { ...this.props }),\n    )\n\n    // Normally, just render children\n    // and pass all props\n    return childrenWithProps\n  }\n}\n\nexport default ErrorBoundary\n","import rxdb from 'rxdb'\nimport pouchdbAdapterIdb from 'pouchdb-adapter-idb'\n\nrxdb.plugin(pouchdbAdapterIdb)\n\nimport { Props as rxDbStateProps } from '../state/RxDb'\nimport userDbNameFromUserName from './userDbNameFromUserName'\nimport userDocSchema from '../schemas/userDoc.json'\n\nexport default async ({\n  rxDbState,\n  email,\n}: {\n  rxDbState: rxDbStateProps\n  email: string\n}) => {\n  const { dbs, syncs } = rxDbState.state\n  // create userDoc Collection\n  // then sync it\n  const userDbName = userDbNameFromUserName(email)\n  console.log('createAndSyncUserCollections', { dbs, syncs, rxDbState })\n  let userDb\n  if (!rxdb.isRxDatabase(dbs[userDbName])) {\n    userDb = await rxdb.create({\n      name: userDbName,\n      adapter: 'idb',\n    })\n    await userDb.collection({\n      name: 'user',\n      schema: userDocSchema,\n    })\n  }\n  // TODO: enable next line again\n  rxDbState.addDb({ name: userDbName, db: userDb })\n  const isAlreadyBeingSynced: boolean = !!syncs && !!syncs[userDbName]\n  console.log('createAndSyncUserCollections', { dbs })\n  let sync\n  if (!isAlreadyBeingSynced) {\n    sync = userDb.user.sync({\n      remote: `http://localhost:5984/${userDbName}/`,\n      options: {\n        live: true,\n        retry: true,\n      },\n      query: userDb.user\n        .find()\n        .where('type')\n        .eq('user'),\n    })\n  }\n  rxDbState.addSync({ name: userDbName, sync })\n  console.log('Signup', { dbs, userDbName })\n}\n","// @flow\nimport React from 'react'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport Input from '@material-ui/core/Input'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport IconButton from '@material-ui/core/IconButton'\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'\nimport Button from '@material-ui/core/Button'\nimport styled from 'styled-components'\nimport compose from 'recompose/compose'\nimport withHandlers from 'recompose/withHandlers'\nimport withState from 'recompose/withState'\n\nimport ErrorBoundary from '../ErrorBoundary'\nimport withAuthState from '../../state/withAuth'\nimport withRxDbState from '../../state/withRxDb'\nimport { Props as authStateProps } from '../../state/Auth'\nimport { Props as rxDbStateProps } from '../../state/RxDb'\nimport userDbNameFromUserName from '../../utils/userDbNameFromUserName'\nimport userDocSchema from '../../schemas/userDoc.json'\nimport createAndSyncUserCollection from '../../utils/createAndSyncUserCollection'\n\nconst StyledDialog = styled(Dialog)``\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 0 24px;\n`\nconst StyledInput = styled(Input)`\n  &:before {\n    border-bottom-color: rgba(0, 0, 0, 0.1) !important;\n  }\n`\n\nconst enhance = compose(\n  withAuthState,\n  withRxDbState,\n  withState('email', 'setEmail', ''),\n  withState('password', 'setPassword', ''),\n  withState('showPass', 'setShowPass', false),\n  withState('emailErrorText', 'setEmailErrorText', ''),\n  withState('passwordErrorText', 'setPasswordErrorText', ''),\n  withHandlers<any, any>({\n    close: ({ authState }: { authState: authStateProps }) => () =>\n      authState.setSignupOpen(false),\n    onClickSignup: ({\n      email,\n      password,\n      authState,\n      rxDbState,\n    }: {\n      email: string\n      password: string\n      authState: authStateProps\n      rxDbState: rxDbStateProps\n    }) => async () => {\n      try {\n        await authState.state.authDb.signUp(email, password)\n      } catch (error) {\n        console.log('Signup: error logging in:', error)\n      }\n      // log in\n      try {\n        await authState.logIn({ email, password })\n      } catch (error) {\n        throw error\n      }\n      createAndSyncUserCollection({ rxDbState, email })\n    },\n    onToggleShowPass: ({\n      showPass,\n      setShowPass,\n    }: {\n      showPass: boolean\n      setShowPass: (showPass: boolean) => void\n    }) => () => {\n      setShowPass(!showPass)\n    },\n  }),\n  withHandlers<any, any>({\n    onBlurEmail: ({ setEmail }: { setEmail: (email: string) => void }) => (\n      event: Event,\n    ) => setEmail(event.target.value),\n    onBlurPassword: ({\n      setPassword,\n    }: {\n      setPassword: (password: string) => void\n    }) => (event: Event) => setPassword(event.target.value),\n  }),\n)\n\nconst Signup = ({\n  email,\n  password,\n  showPass,\n  setShowPass,\n  emailErrorText,\n  passwordErrorText,\n  setEmailErrorText,\n  setPasswordErrorText,\n  onBlurEmail,\n  onBlurPassword,\n  onClickSignup,\n  user,\n  close,\n  onToggleShowPass,\n  db,\n  authState,\n}: {\n  email: string\n  showPass: boolean\n  setEmail: () => void\n  password: string\n  setShowPass: (showPass: boolean) => void\n  setPassword: () => void\n  emailErrorText: string\n  setEmailErrorText: () => void\n  passwordErrorText: string\n  setPasswordErrorText: () => void\n  onBlurEmail: () => void\n  onBlurPassword: () => void\n  onClickSignup: () => void\n  user: Object\n  close: () => void\n  onToggleShowPass: () => void\n  db: any\n  authState: authStateProps\n}) => (\n  <ErrorBoundary>\n    <StyledDialog\n      aria-labelledby=\"dialog-title\"\n      open={authState.state.signupOpen}\n    >\n      <DialogTitle id=\"dialog-title\">Neues Konto</DialogTitle>\n      <StyledDiv>\n        <FormControl\n          error={!!emailErrorText}\n          fullWidth\n          aria-describedby=\"emailHelper\"\n        >\n          <InputLabel htmlFor=\"email\">Email</InputLabel>\n          <StyledInput\n            id=\"email\"\n            defaultValue={email}\n            onBlur={onBlurEmail}\n            autoFocus\n            onKeyPress={e => {\n              if (e.key === 'Enter') {\n                onBlurEmail()\n              }\n            }}\n          />\n          <FormHelperText id=\"emailHelper\">{emailErrorText}</FormHelperText>\n        </FormControl>\n        <FormControl\n          error={!!passwordErrorText}\n          fullWidth\n          aria-describedby=\"passwortHelper\"\n        >\n          <InputLabel htmlFor=\"passwort\">Passwort</InputLabel>\n          <StyledInput\n            id=\"passwort\"\n            type={showPass ? 'text' : 'password'}\n            defaultValue={password}\n            onBlur={onBlurPassword}\n            onKeyPress={e => {\n              if (e.key === 'Enter') {\n                onBlurPassword()\n              }\n            }}\n            autoComplete=\"current-password\"\n            autoCorrect=\"off\"\n            spellCheck=\"false\"\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  onClick={onToggleShowPass}\n                  onMouseDown={e => e.preventDefault()}\n                  title={showPass ? 'verstecken' : 'anzeigen'}\n                >\n                  {showPass ? <MdVisibilityOff /> : <MdVisibility />}\n                </IconButton>\n              </InputAdornment>\n            }\n          />\n          <FormHelperText id=\"passwortHelper\">\n            {passwordErrorText}\n          </FormHelperText>\n        </FormControl>\n      </StyledDiv>\n      <DialogActions>\n        <Button onClick={close}>abbrechen</Button>\n        <Button color=\"primary\" onClick={onClickSignup}>\n          Konto erstellen\n        </Button>\n      </DialogActions>\n    </StyledDialog>\n  </ErrorBoundary>\n)\n\nexport default enhance(Signup)\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Menu from '@material-ui/core/Menu'\nimport { FaUserCircle as UserIcon } from 'react-icons/fa'\nimport compose from 'recompose/compose'\nimport withHandlers from 'recompose/withHandlers'\nimport withState from 'recompose/withState'\nimport styled from 'styled-components'\n\nimport Signup from './Signup'\nimport Login from './Login'\nimport ErrorBoundary from '../ErrorBoundary'\nimport withAuthState from '../../state/withAuth'\nimport { Props as authStateProps } from '../../state/Auth'\n\nconst IconContainer = styled.div`\n  position: relative;\n  padding-left: 10px;\n`\nconst UserNameDiv = styled.div`\n  position: absolute;\n  bottom: 0;\n  font-size: 10px;\n  width: 60px;\n  left: 5px;\n  text-align: center;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  /* ensure cursor is not changed */\n  z-index: -1;\n`\n\ninterface Props {\n  anchorEl: EventTarget | null\n  setAnchorEl: (anchorEl: EventTarget | null) => void\n  onClickMenu: (event: Event) => void\n  onCloseMenu: (event: Event) => void\n  onClickSignup: (signupOpen: boolean) => void\n  onClickLognin: (signupOpen: boolean) => void\n  authState: authStateProps\n}\n\nconst enhance = compose(\n  withAuthState,\n  withState('anchorEl', 'setAnchorEl', null),\n  withHandlers<any, any>({\n    onClickMenu: ({\n      setAnchorEl,\n    }: {\n      setAnchorEl: (anchorEl: EventTarget | null) => void\n    }) => (event: Event) => setAnchorEl(event.currentTarget),\n    onCloseMenu: ({\n      setAnchorEl,\n    }: {\n      setAnchorEl: (anchorEl: EventTarget | null) => void\n    }) => () => setAnchorEl(null),\n    onClickSignup: ({\n      setAnchorEl,\n      authState,\n    }: {\n      setAnchorEl: (anchorEl: EventTarget | null) => void\n      authState: authStateProps\n    }) => () => {\n      setAnchorEl(null)\n      authState.setSignupOpen(!authState.state.signupOpen)\n    },\n    onClickLogin: ({\n      setAnchorEl,\n      authState,\n    }: {\n      setAnchorEl: (anchorEl: EventTarget | null) => void\n      authState: authStateProps\n    }) => () => {\n      setAnchorEl(null)\n      authState.setLoginOpen(!authState.state.loginOpen)\n    },\n    onClickLogout: ({\n      setAnchorEl,\n      authState,\n    }: {\n      setAnchorEl: (anchorEl: EventTarget | null) => void\n      authState: authStateProps\n    }) => () => {\n      setAnchorEl(null)\n      authState.logOut()\n    },\n  }),\n)\n\nconst Account: React.SFC<Props> = ({\n  anchorEl,\n  onCloseMenu,\n  onClickMenu,\n  onClickSignup,\n  onClickLogout,\n  onClickLogin,\n  authState,\n}) => {\n  const { name, signupOpen, loginOpen } = authState.state\n\n  return (\n    <ErrorBoundary>\n      <>\n        <IconContainer>\n          <IconButton\n            aria-haspopup=\"true\"\n            aria-label=\"Konto\"\n            onClick={onClickMenu}\n            color=\"inherit\"\n            title=\"Konto\"\n          >\n            <UserIcon />\n          </IconButton>\n          <UserNameDiv>{name || ''}</UserNameDiv>\n        </IconContainer>\n        <Menu\n          id=\"menu-appbar\"\n          anchorEl={anchorEl}\n          anchorOrigin={{\n            vertical: 'top',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'right',\n          }}\n          open={!!anchorEl}\n          onClose={onCloseMenu}\n        >\n          {!name && <MenuItem onClick={onClickLogin}>Anmelden</MenuItem>}\n          {name && <MenuItem onClick={onClickLogout}>Abmelden</MenuItem>}\n          <MenuItem onClick={onClickSignup}>Konto erstellen</MenuItem>\n        </Menu>\n        {signupOpen && <Signup />}\n        {loginOpen && <Login />}\n      </>\n    </ErrorBoundary>\n  )\n}\n\nexport default enhance(Account)\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport styled from 'styled-components'\nimport { Link, navigate } from 'gatsby'\nimport { Location } from '@reach/router'\nimport compose from 'recompose/compose'\nimport withHandlers from 'recompose/withHandlers'\n\nimport Account from './Account'\nimport ErrorBoundary from '../ErrorBoundary'\n\nconst SiteTitle = styled(Typography)`\n  display: none;\n  cursor: pointer;\n  @media (min-width: 700px) {\n    display: block;\n  }\n`\nconst Spacer = styled.div`\n  flex-grow: 1;\n`\ninterface NavButtonProps {\n  active: boolean\n}\nconst NavButton = styled<NavButtonProps, any>(Button)`\n  color: white !important;\n  border: ${props => (props.active ? '1px white' : 'unset')};\n  border-color: rgba(255, 255, 255, 0.5) !important;\n  font-weight: ${props => (props.active ? '700' : '600')};\n`\n\nconst enhance = compose(\n  withHandlers({ onClickSiteTitle: () => () => navigate('/') }),\n)\n\ninterface Props {\n  onClickSiteTitle: () => void\n}\n\nconst Header: React.SFC<Props> = ({ onClickSiteTitle }) => (\n  <Location>\n    {({ location }) => {\n      const { pathname } = location\n\n      return (\n        <ErrorBoundary>\n          <AppBar position=\"fixed\">\n            <Toolbar>\n              <SiteTitle\n                variant=\"h6\"\n                color=\"inherit\"\n                noWrap\n                title=\"Home\"\n                onClick={onClickSiteTitle}\n              >\n                erfassen.ch\n              </SiteTitle>\n              <Spacer />\n              <NavButton\n                variant={pathname === '/' ? 'outlined' : 'text'}\n                component={Link}\n                to=\"/\"\n                active={(pathname === '/').toString()}\n              >\n                Home\n              </NavButton>\n              <NavButton\n                variant={pathname === '/Projekte/' ? 'outlined' : 'text'}\n                component={Link}\n                to=\"/Projekte/\"\n                active={(pathname === '/Projekte/').toString()}\n              >\n                Projekte\n              </NavButton>\n              <Account />\n            </Toolbar>\n          </AppBar>\n        </ErrorBoundary>\n      )\n    }}\n  </Location>\n)\n\nexport default enhance(Header)\n","/**\n * Cant move Helmet to App\n * because neither StaticQuery nor AppQuery\n * work there :-(\n */\nimport React from 'react'\nimport Helmet from 'react-helmet'\nimport { StaticQuery, graphql } from 'gatsby'\n\nimport Header from './Header'\n\nconst query = graphql`\n  query SiteTitleQuery {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n  }\n`\n\nconst Layout: React.SFC<{}> = ({ children }) => (\n  <StaticQuery\n    query={query}\n    render={data => (\n      <>\n        <Helmet\n          title={data.site.siteMetadata.title}\n          meta={[\n            { name: 'description', content: 'Sample' },\n            { name: 'keywords', content: 'sample, something' },\n          ]}\n        >\n          <html lang=\"en\" />\n        </Helmet>\n        <Header />\n        {children}\n      </>\n    )}\n  />\n)\n\nexport default Layout\n","// in development should return local path\nexport default () => {\n  if (typeof window === 'undefined') {\n    return 'https://erfassen.ch:5984/erfassen'\n  }\n  const hostnameWithoutWww: string = window.location.hostname.replace(\n    'www.',\n    '',\n  )\n  const isLocalhost: boolean = hostnameWithoutWww === 'localhost'\n  const hostname = isLocalhost ? 'localhost' : window.location.hostname\n  const couchUrl: string = isLocalhost\n    ? `http://${hostname}:5984/erfassen`\n    : `https://erfassen.ch:5984/erfassen`\n\n  return couchUrl\n}\n","import { Container } from 'unstated'\n/**\n * somehow gatsby manages to sometimes (not always)\n * drag this file through node which makes\n * pouchdb-browser complain fetch is missing\n * using pouchdb is no solution because that complains\n * to miss many bindings\n */\nimport 'isomorphic-fetch'\nimport PouchDB from 'pouchdb-browser'\nimport pouchdbAuthentication from 'pouchdb-authentication'\nimport get from 'lodash/get'\n\nimport couchUrl from '../utils/couchUrl'\n\nPouchDB.plugin(pouchdbAuthentication)\n\ninterface LogInProps {\n  email: string\n  password: string\n}\n\ninterface StateProps {\n  authDb: any\n  name: string | null\n  signupOpen: boolean\n  loginOpen: boolean\n}\nexport interface Props {\n  state: StateProps\n  setAuthDb: (authDb: any) => void\n  setName: (name: string | null) => void\n  setSignupOpen: (signupOpen: boolean) => void\n  setLoginOpen: (loginOpen: boolean) => void\n  logIn: () => void\n  logOut: () => void\n}\n\nexport default class AuthContainer extends Container<StateProps> {\n  constructor(props: StateProps) {\n    super()\n    const authDb = new PouchDB(couchUrl())\n    this.state = {\n      authDb,\n      name: null,\n      signupOpen: false,\n      loginOpen: false,\n    }\n\n    authDb\n      .getSession()\n      .then((resp: any) => {\n        const name = get(resp, 'userCtx.name', null)\n        if (name) {\n          this.setState(state => ({ name }))\n        }\n      })\n      .catch((error: Error) => {\n        throw error\n      })\n  }\n\n  setAuthDb = (authDb: any) => {\n    this.setState(state => ({ authDb }))\n  }\n\n  setName = (name: string | null) => {\n    this.setState(state => ({ name }))\n  }\n\n  setSignupOpen = (signupOpen: boolean) => {\n    this.setState(state => ({ signupOpen }))\n  }\n\n  setLoginOpen = (loginOpen: boolean) => {\n    this.setState(state => ({ loginOpen }))\n  }\n\n  logIn = async ({ email, password }: LogInProps) => {\n    let logInResponce: any\n    try {\n      logInResponce = await this.state.authDb.logIn(email, password)\n    } catch (error) {\n      if (error.name === 'unauthorized' || error.name === 'forbidden') {\n        // name or password incorrect\n        throw new Error('Name oder Passwort stimmt nicht')\n      } else {\n        // cosmic rays, a meteor, etc.\n        throw error\n      }\n    }\n    console.log('Login: logInResponce logging in:', logInResponce)\n    this.setState(state => ({ name: logInResponce.name, loginOpen: false }))\n  }\n\n  logOut = async () => {\n    try {\n      await this.state.authDb.logOut()\n    } catch (error) {\n      throw error\n    }\n    this.setState(state => ({ name: null, loginOpen: false }))\n  }\n}\n","/**\n * inspired from:\n * https://www.reddit.com/r/reactjs/comments/8t3di7/how_do_you_access_your_store_in_lifecycle/\n * example: https://github.com/jaredpalmer/react-fns/blob/052ea56092c53946c7937e1d32adf78a7d37d6f3/src/GeoPosition/withGeoPosition.tsx\n */\nimport React from 'react'\nimport { Subscribe } from 'unstated'\n\nimport AuthState from './Auth'\n\nexport default WrappedComponent => props => (\n  <Subscribe to={[AuthState]}>\n    {value => <WrappedComponent authState={value} {...props} />}\n  </Subscribe>\n)\n","// @flow\nimport React from 'react'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport Input from '@material-ui/core/Input'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport IconButton from '@material-ui/core/IconButton'\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'\nimport Button from '@material-ui/core/Button'\nimport styled from 'styled-components'\nimport compose from 'recompose/compose'\nimport withHandlers from 'recompose/withHandlers'\nimport withState from 'recompose/withState'\n\nimport ErrorBoundary from '../ErrorBoundary'\nimport withAuthState from '../../state/withAuth'\nimport { Props as authStateProps } from '../../state/Auth'\n\nconst StyledDialog = styled(Dialog)``\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 0 24px;\n`\nconst StyledInput = styled(Input)`\n  &:before {\n    border-bottom-color: rgba(0, 0, 0, 0.1) !important;\n  }\n`\n\nconst enhance = compose(\n  withAuthState,\n  withState('email', 'setEmail', ''),\n  withState('password', 'setPassword', ''),\n  withState('showPass', 'setShowPass', false),\n  withState('emailErrorText', 'setEmailErrorText', ''),\n  withState('passwordErrorText', 'setPasswordErrorText', ''),\n  withHandlers<any, any>({\n    close: ({ authState }: { authState: authStateProps }) => () =>\n      authState.setLoginOpen(false),\n    onClickLogin: ({\n      email,\n      password,\n      authState,\n    }: {\n      email: string\n      password: string\n      authState: authStateProps\n    }) => async () => {\n      try {\n        await authState.logIn({ email, password })\n      } catch (error) {\n        throw error\n      }\n    },\n    onToggleShowPass: ({\n      showPass,\n      setShowPass,\n    }: {\n      showPass: boolean\n      setShowPass: (showPass: boolean) => void\n    }) => () => {\n      setShowPass(!showPass)\n    },\n  }),\n  withHandlers<any, any>({\n    onBlurEmail: ({ setEmail }: { setEmail: (email: string) => void }) => (\n      event: Event,\n    ) => setEmail(event.target.value),\n    onBlurPassword: ({\n      setPassword,\n    }: {\n      setPassword: (password: string) => void\n    }) => (event: Event) => setPassword(event.target.value),\n  }),\n)\n\nconst Login = ({\n  email,\n  password,\n  showPass,\n  setShowPass,\n  emailErrorText,\n  passwordErrorText,\n  setEmailErrorText,\n  setPasswordErrorText,\n  onBlurEmail,\n  onBlurPassword,\n  onClickLogin,\n  close,\n  onToggleShowPass,\n  authState,\n}: {\n  email: string\n  showPass: boolean\n  setEmail: () => void\n  password: string\n  setShowPass: (showPass: boolean) => void\n  setPassword: () => void\n  emailErrorText: string\n  setEmailErrorText: () => void\n  passwordErrorText: string\n  setPasswordErrorText: () => void\n  onBlurEmail: () => void\n  onBlurPassword: () => void\n  onClickLogin: () => void\n  close: () => void\n  onToggleShowPass: () => void\n  authState: authStateProps\n}) => (\n  <ErrorBoundary>\n    <StyledDialog\n      aria-labelledby=\"login-dialog-title\"\n      open={authState.state.loginOpen}\n    >\n      <DialogTitle id=\"login-dialog-title\">Anmeldung</DialogTitle>\n      <StyledDiv>\n        <FormControl\n          error={!!emailErrorText}\n          fullWidth\n          aria-describedby=\"loginEmailHelper\"\n        >\n          <InputLabel htmlFor=\"loginEmail\">Email</InputLabel>\n          <StyledInput\n            id=\"loginEmail\"\n            defaultValue={email}\n            onBlur={onBlurEmail}\n            autoFocus\n            onKeyPress={e => {\n              if (e.key === 'Enter') {\n                onBlurEmail(e)\n              }\n            }}\n          />\n          <FormHelperText id=\"loginEmailHelper\">\n            {emailErrorText}\n          </FormHelperText>\n        </FormControl>\n        <FormControl\n          error={!!passwordErrorText}\n          fullWidth\n          aria-describedby=\"loginPasswortHelper\"\n        >\n          <InputLabel htmlFor=\"loginPasswort\">Passwort</InputLabel>\n          <StyledInput\n            id=\"loginPasswort\"\n            type={showPass ? 'text' : 'password'}\n            defaultValue={password}\n            onBlur={onBlurPassword}\n            onKeyPress={e => {\n              if (e.key === 'Enter') {\n                onBlurPassword(e)\n              }\n            }}\n            autoComplete=\"current-password\"\n            autoCorrect=\"off\"\n            spellCheck=\"false\"\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  onClick={onToggleShowPass}\n                  onMouseDown={e => e.preventDefault()}\n                  title={showPass ? 'verstecken' : 'anzeigen'}\n                >\n                  {showPass ? <MdVisibilityOff /> : <MdVisibility />}\n                </IconButton>\n              </InputAdornment>\n            }\n          />\n          <FormHelperText id=\"loginPasswortHelper\">\n            {passwordErrorText}\n          </FormHelperText>\n        </FormControl>\n      </StyledDiv>\n      <DialogActions>\n        <Button onClick={close}>abbrechen</Button>\n        <Button color=\"primary\" onClick={onClickLogin}>\n          Anmelden\n        </Button>\n      </DialogActions>\n    </StyledDialog>\n  </ErrorBoundary>\n)\n\nexport default enhance(Login)\n","import rxdb from 'rxdb'\n\nimport pouchdbAdapterHttp from 'pouchdb-adapter-http'\nimport pouchdbAdapterIdb from 'pouchdb-adapter-idb'\n\nimport zeitSchema from '../schemas/zeit.json'\nimport ortSchema from '../schemas/ort.json'\nimport beobSchema from '../schemas/beob.json'\nimport messageSchema from '../schemas/message.json'\n\nrxdb.plugin(pouchdbAdapterHttp)\nrxdb.plugin(pouchdbAdapterIdb)\n\nexport default async () => {\n  // TODO:\n  // 1. fetch userDoc and it's project list\n  // 2. for every project create an rxdb\n  // 3. for every project fetch typeDefs doc and extract table list\n  // 4. for every table create collection and sync it\n  let syncs: any = {}\n  let dbs = {}\n  try {\n    dbs.erfassen = await rxdb.create({\n      name: 'erfassen',\n      adapter: 'idb',\n    })\n  } catch (error) {\n    throw error\n  }\n  // maybe use\n  // https://github.com/rafamel/rxdb-utils#models\n  // to make this easier\n  await dbs.erfassen.collection({\n    name: 'message',\n    schema: messageSchema,\n  })\n  await dbs.erfassen.collection({\n    name: 'zeit',\n    schema: zeitSchema,\n  })\n  await dbs.erfassen.collection({\n    name: 'ort',\n    schema: ortSchema,\n  })\n  /**\n   * create global sync object\n   * and pass it sync responces\n   * reason: be able to check if replication exists already\n   * before starting new one\n   */\n  syncs.ort = await dbs.erfassen.ort.sync({\n    remote: 'http://localhost:5984/erfassen/',\n    options: {\n      live: true,\n      retry: true,\n    },\n    query: dbs.erfassen.ort\n      .find()\n      .where('type')\n      .eq('ort'),\n  })\n  await dbs.erfassen.collection({\n    name: 'beob',\n    schema: beobSchema,\n  })\n  syncs.beob = dbs.erfassen.beob.sync({\n    remote: 'http://localhost:5984/erfassen/',\n    options: {\n      live: true,\n      retry: true,\n    },\n    query: dbs.erfassen.beob\n      .find()\n      .where('type')\n      .eq('beob'),\n  })\n\n  return { dbs, syncs }\n}\n","import { Container } from 'unstated'\n\nimport createRxDb from '../utils/createRxDb'\n\ninterface StateProps {\n  dbs: any\n  syncs: Object\n}\nexport interface Props {\n  state: StateProps\n  addDb: () => void\n  addSync: () => void\n}\ndeclare global {\n  interface Window {\n    dbs: any\n  }\n}\n\n/**\n * window.dbs is a hack\n * state gets lost in live update in gatsby\n * so need to set it on window and fetch it from there\n * to enable nice dev experience\n */\nexport default class RxDbContainer extends Container<StateProps> {\n  constructor(props: StateProps) {\n    super()\n    const dbs = typeof window === 'undefined' ? null : window.dbs || null\n    this.state = {\n      dbs,\n      syncs: {},\n    }\n    // create initial state\n    if (\n      (typeof window !== 'undefined' && !window.dbs) ||\n      typeof window === 'undefined'\n    ) {\n      // as hard as I tried, could not get typescript to type .then correctly\n      createRxDb()\n        .then(({ dbs, syncs }) => {\n          this.setState(state => ({ dbs, syncs }))\n          console.log({ syncs })\n          if (typeof window !== 'undefined') window.dbs = dbs\n        })\n        .catch(error => {\n          throw error\n        })\n    }\n  }\n\n  addDb = ({ name, db }: { name: string; db: any }) => {\n    console.log('RxDb, addDb', { name, db, dbs: this.state.dbs })\n    this.setState(state => {\n      const newDbs = {\n        ...state.dbs,\n        [name]: db,\n      }\n      console.log('RxDb, addDb', { newDbs })\n      return {\n        dbs: newDbs,\n        //syncs: state.syncs,\n      }\n    })\n  }\n\n  addSync = ({ name, sync }: { name: string; sync: any }) => {\n    this.setState(state => {\n      const newSyncs = {\n        ...state.syncs,\n        [name]: sync,\n      }\n      return {\n        dbs: state.dbs,\n        syncs: newSyncs,\n      }\n    })\n  }\n}\n","/**\n * inspired from:\n * https://www.reddit.com/r/reactjs/comments/8t3di7/how_do_you_access_your_store_in_lifecycle/\n * example: https://github.com/jaredpalmer/react-fns/blob/052ea56092c53946c7937e1d32adf78a7d37d6f3/src/GeoPosition/withGeoPosition.tsx\n */\nimport React from 'react'\nimport { Subscribe } from 'unstated'\n\nimport RxDbState from './RxDb'\n\nexport default function withRxDbState(WrappedComponent) {\n  return props => (\n    <Subscribe to={[RxDbState]}>\n      {value => <WrappedComponent rxDbState={value} {...props} />}\n    </Subscribe>\n  )\n}\n","module.exports = (name: string): string =>\n  'user_' +\n  name\n    .toLowerCase()\n    .replace('@', '_at_')\n    .replace('.', '_p_')\n"],"sourceRoot":""}